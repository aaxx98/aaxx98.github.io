{"version":3,"file":"component---src-pages-post-mdx-frontmatter-slug-tsx-content-file-path-content-til-20260106-til-20260106-mdx-8b7a9933c324988f0731.js","mappings":"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","sources":["webpack://aaxx98-blog/./src/components/post/post-content.tsx","webpack://aaxx98-blog/./content/til/20260106/til-20260106.mdx","webpack://aaxx98-blog/./src/pages/post/{mdx.frontmatter__slug}.tsx","webpack://aaxx98-blog/./src/components/post/toc.tsx","webpack://aaxx98-blog/./src/code/tagName.ts","webpack://aaxx98-blog/./src/components/breadcrumb.tsx","webpack://aaxx98-blog/./src/components/post/comment.tsx","webpack://aaxx98-blog/./src/components/post/post-tags.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport Breadcrumb from '../breadcrumb';\n\nfunction PostContent({ data }: any) {\n  return (\n    <div className=\"post-content-container\">\n      <h1 className=\"post-content-title\">{data.mdx.frontmatter.title}</h1>\n      <p className=\"post-content-meta\">작성일: {data.mdx.frontmatter.date}</p>\n      <div className=\"breadcrumb-wrap\">\n        <Breadcrumb\n          info={[\n            { name: 'HOME', url: '/' },\n            {\n              name: `${data.mdx.frontmatter.category}`,\n              url: `/categories/${data.mdx.frontmatter.category}`,\n            },\n            {\n              name: data.mdx.frontmatter.title,\n              url: `/${data.mdx.frontmatter.slug}`,\n            },\n          ]}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default PostContent;\n","/*@jsxRuntime classic @jsx React.createElement @jsxFrag React.Fragment*/\nimport {useMDXComponents as _provideComponents} from \"@mdx-js/react\";\nimport React from \"react\";\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    blockquote: \"blockquote\",\n    p: \"p\",\n    h1: \"h1\",\n    ol: \"ol\",\n    li: \"li\",\n    h2: \"h2\",\n    strong: \"strong\",\n    span: \"span\",\n    h3: \"h3\",\n    ul: \"ul\",\n    code: \"code\"\n  }, _provideComponents(), props.components);\n  return React.createElement(React.Fragment, null, React.createElement(_components.blockquote, null, \"\\n\", React.createElement(_components.p, null, \"선착순 쿠폰 발급 기능을 구현하면서 동시성 문제를 직접 마주하게 되었습니다.\"), \"\\n\", React.createElement(_components.p, null, \"처음에는 단순한 조회-수정-저장 로직으로 충분할 줄 알았는데, 동시 요청 환경에서 예상치 못한 문제들이 발생했고,\"), \"\\n\", React.createElement(_components.p, null, \"이를 해결하기 위해 여러 방법을 시도하며 각각의 장단점을 정리해보았습니다.\"), \"\\n\"), \"\\n\", React.createElement(_components.h1, null, \"문제 발견\"), \"\\n\", React.createElement(_components.p, null, \"선착순 쿠폰 이벤트 기능을 개발하고 있었습니다. 기본 로직은 다음과 같았습니다.\"), \"\\n\", React.createElement(_components.ol, null, \"\\n\", React.createElement(_components.li, null, \"쿠폰 정보 조회\"), \"\\n\", React.createElement(_components.li, null, \"남은 수량 확인\"), \"\\n\", React.createElement(_components.li, null, \"수량 감소 후 저장\"), \"\\n\", React.createElement(_components.li, null, \"사용자에게 발급\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"개발 환경에서 단건 테스트를 할 때는 문제가 없었습니다. 그런데 JMeter로 1000개의 동시 요청을 보내자 이상한 현상이 발생했습니다.\"), \"\\n\", React.createElement(_components.p, null, \"100개만 발급되어야 하는 쿠폰이 실제로는 130여 개가 발급되었고, DB를 확인해보니 남은 수량이 음수로 표시되어 있었습니다.\"), \"\\n\", React.createElement(_components.h2, null, \"원인 파악\"), \"\\n\", React.createElement(_components.p, null, \"로그를 추적해보니 여러 스레드가 동시에 같은 쿠폰 정보를 조회하고 있었습니다.\"), \"\\n\", React.createElement(_components.p, null, \"전형적인 \", React.createElement(_components.strong, null, \"Race Condition\"), \" 상황이었습니다. 여러 스레드가 동시에 같은 데이터를 읽고 수정하면서 데이터 정합성이 깨지는 것입니다.\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 298px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/11d604ed122d70cb233b74f209af4927/fa9f6/data-race.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 94%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAACwUlEQVR42n1U227aQBTk//+i6kurRpXy2BCgSkhIQlHzlAZUQlAId18wtsH2rqdzjrmluRitjb2zs3NmZ7eU5xZJkiCKIoRhiGjT4jjSlqYJBCMtFRy/RVGBEXwcFTjhAHKU5DYcDjGbzeB7Lnzfw2KxgOs6eH5+xmQyhlxCOOS74DzPI3aDcxxiJsohmFJuLQEuHHacnZ2h0Wjg5uYG7ft7VT135kporcF8Plcy6T8/P0er1cLt7S2CINC+LEsLhePRCB6VORwss6lavstzyvetwtFoqIQyWPumU1Xo+75yyKRKKB7IRy2Fz263iyVndV0Xq1Ws3uxxnvrX6XSUeLlcaoVxXOBKheG5qpAy6vU62u02/IW/U6bN7nHiXbf7F5VqBVdXDRhjlKzwkDdrMgU2m00cHx9z1gCO+uUWpCxFCOVyHVetEX/L5RNcXl6SMCsmtHar0OoMEocFlaVpqoMHgwEXxRFGbQ4tkNUUbMY4BcRG4XJfRX5AuC1dqiomACL602NpUeMCcfMaPfoW07/CiqL8ooJ3CQ/84s9Qcc7AJlzRZDaFXa+Q8Rn9aiK8biD63YLhYuQb/z4mpAIjC5NlOyWW5CZYYNVpY1H+oc/8wOMXHh6SSZ7k8u7uMOr1MJXMsQ0ZJ6/9p1A9eELGxdsRfqTQbAgfHh7QI+GIoZXFkEXq8Ru2yRTPrf1oUYq2Vdjv9/HYf9TdMxmPSfik3zRz26jkbxHat0sOGGAhGPOAGJNQlIZceSVU3Ouxe8LDzk2IZZuVT09RrdVQqVRQv7jAar3e76D/CV+VzJ9N1kinEzXa8PRYUt2Sh4CEPuQOSaSPwbfse79knc2o0RlVud++wPt+hKBygph5C39WEdYq8I++wv38SSMTVE81l4cZ3J2HL2NjYFcrGG4pwwGGijP5z5Mmo0ojfQyzYA7jsiX8B3xysisG93TZAAAAAElFTkSuQmCC'); background-size: cover; display: block;\\\"\\n  ></span>\\n  <picture>\\n          <source\\n              srcset=\\\"/static/11d604ed122d70cb233b74f209af4927/f1512/data-race.webp 200w,\\n/static/11d604ed122d70cb233b74f209af4927/9729f/data-race.webp 298w\\\"\\n              sizes=\\\"(max-width: 298px) 100vw, 298px\\\"\\n              type=\\\"image/webp\\\"\\n            />\\n          <source\\n            srcset=\\\"/static/11d604ed122d70cb233b74f209af4927/f8f3a/data-race.png 200w,\\n/static/11d604ed122d70cb233b74f209af4927/fa9f6/data-race.png 298w\\\"\\n            sizes=\\\"(max-width: 298px) 100vw, 298px\\\"\\n            type=\\\"image/png\\\"\\n          />\\n          <img\\n            class=\\\"gatsby-resp-image-image\\\"\\n            src=\\\"/static/11d604ed122d70cb233b74f209af4927/fa9f6/data-race.png\\\"\\n            alt=\\\"Database의 Race Condition\\\"\\n            title=\\\"\\\"\\n            loading=\\\"lazy\\\"\\n            decoding=\\\"async\\\"\\n            style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n          />\\n        </picture>\\n  </a>\\n    </span>\"\n    }\n  })), \"\\n\", React.createElement(_components.h3, null, \"문제 상황\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"스레드 1: 남은 수량 3 조회 → 쿠폰 발급 및 수량 1 감소\"), \"\\n\", React.createElement(_components.li, null, \"스레드 2: 남은 수량 3 조회 (1의 저장 이전) → 쿠폰 발급 및 수량 1 감소\"), \"\\n\", React.createElement(_components.li, null, \"...\"), \"\\n\", React.createElement(_components.li, null, \"스레드 N: 남은 수량 3 조회 (1...N-1의 저장 이전) → 쿠폰 발급 및 수량 1 감소\"), \"\\n\", React.createElement(_components.li, null, \"결과: 유효 수량이 3인 상태에서 3보다 큰 N번의 발급이 일어났으며, 남은 수량이 음수가 됨\"), \"\\n\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/7e158c9df84b7a90a6635a46082b907c/ab842/race-condition.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 58.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACXElEQVR42o2TS2/TQBSF/ZNASAix5h/wZyiwY8c2EqzYsERUKgLUqipUhSYhbigNTVs1VeOkaeqm8duel1+H67HLghUjHc0oR/P5nnsnBsoSet3uzSoKiUwtkacuiszT5ywNay/ntZe5JK85J9ozrhnDyLYxC0NEUlZkbaRijtg+wOXJPsa/uwimx2DeUHuKjRHNB5ge9XE+6CC4OIQIz2rgTwLtuy5Mz8N5FGlg2QCV1wVf9sGWJoTTo0uD2uNj7bHKuzEh3R9Q8akOaewuFtg4PcX3mxuMkwQ8jhHFHCyewrfX4F2twZmvgfsfIaM9ZDnAwhH9vgrX/gCXfBl+gkqOIGUGo09V/SKISXsFrD5zW2HO2kgX62DWO5S8S1XsIy+qyOco2C7UFX1ktkpeB2lyoj2jS3G/XV6i7TiYcE4VRnDcgPYLKPEWcdRC6LbA+SsC9XSsTFiQ4g3isIXIb0GI19SGur/G19kM73s9bM/nsGhAceDDDyi2b8HPHmOa3MWZ8xCL/A5Y8llfysQETvqIvHsYOQ/gFPfBKY0G9inuAUXd+xu5qC9JGwl7CS95Ajd6joCtQFLMW2DMX5C3Qt4zROIpFB80UyZI1cMKaDXAqoeZslEKAiizlmwj4/WUczkBKk+atUQbuRhpz9ihqNuTCXboLY4JHPoerhcORR5D+JsQwRbpC503kPgmuCgh6IlArJO2Gq1T1Uc1sLNcokNPpkPDsQhY5rmelhQuRDSETI4h40pDiMTSz0aJa6poSDpudEgtuqojB2kKRyl49C9JCfa/q5r2v6qAfwA9boDF3law4wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\\\"\\n  ></span>\\n  <picture>\\n          <source\\n              srcset=\\\"/static/7e158c9df84b7a90a6635a46082b907c/f1512/race-condition.webp 200w,\\n/static/7e158c9df84b7a90a6635a46082b907c/f59aa/race-condition.webp 400w,\\n/static/7e158c9df84b7a90a6635a46082b907c/47a22/race-condition.webp 800w,\\n/static/7e158c9df84b7a90a6635a46082b907c/06488/race-condition.webp 855w\\\"\\n              sizes=\\\"(max-width: 800px) 100vw, 800px\\\"\\n              type=\\\"image/webp\\\"\\n            />\\n          <source\\n            srcset=\\\"/static/7e158c9df84b7a90a6635a46082b907c/f8f3a/race-condition.png 200w,\\n/static/7e158c9df84b7a90a6635a46082b907c/6a8a8/race-condition.png 400w,\\n/static/7e158c9df84b7a90a6635a46082b907c/7842b/race-condition.png 800w,\\n/static/7e158c9df84b7a90a6635a46082b907c/ab842/race-condition.png 855w\\\"\\n            sizes=\\\"(max-width: 800px) 100vw, 800px\\\"\\n            type=\\\"image/png\\\"\\n          />\\n          <img\\n            class=\\\"gatsby-resp-image-image\\\"\\n            src=\\\"/static/7e158c9df84b7a90a6635a46082b907c/7842b/race-condition.png\\\"\\n            alt=\\\"멀티 스레드에서 Race Condition 발생\\\"\\n            title=\\\"\\\"\\n            loading=\\\"lazy\\\"\\n            decoding=\\\"async\\\"\\n            style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n          />\\n        </picture>\\n  </a>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.h1, null, \"해결 과정\"), \"\\n\", React.createElement(_components.h2, null, \"비관적 락 (Pessimistic Lock)\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/322e755d1d070e1f7142db2e1737a66a/7d769/pessimistic.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 56.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB+UlEQVR42nWRu24TQRSG/UyUFEh0vAENDTUPQEWDREGRhoqGB0BKQwEIESDB2M7NhJCEKLZje2c39l5mZr1zO3Nbm/FiCgqOjo5GR+eb/585LWltIsQwzxPOlbWr1aqujWGTKo1JMmZ5ZBQOTe+VKqd0jopkEprekNBsFVr3iqI7mx1gTLTWCiJ0vZh3bgbtycUXMm1rPglzzlaQ98i4nV59lrOOg3gNE2MCvIfQISGZEAGmtOB4TxUfZfLGiq9ajtfKtkK4f0lGg3KM6LGR0RrGAN85P9O6zxjR0Ig4UNtCPCvTJ1JtgRis32LKKzLcvcHtOT4hc5Cogf8ox/F+o+ytkdxT/vTG3BpXd1N9W/CfDUyHdHTEoc/lCZ0p2djGWu9j3E3Tw2BXymVdAwDNtyl5wRYvDbyKoz6h3OkyIacDFo9YfE1/bZQLgGD4VMp+VRVKrZZLY6DCZ4v8XISh6hLnUZzMUTSUZIfl71j6Fsr3RkWb3z6uqh9ChNrYttoY66x1oYaT9t55XytJjegY8kGh1059+/thWh9Q2suyo7JcK9d1mG2ATYbwYfUATD7H8CBjD6l6pOVkA7fz/BNCXYwzzoMYhG1r+CeNFkwUi8eI3Ymre9Tex/kFgGtZ74PzzNpwi6vr1X/CO7nI9shsh+NdJ3poeo5J+RuL8FvvalZiTwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\\\"\\n  ></span>\\n  <picture>\\n          <source\\n              srcset=\\\"/static/322e755d1d070e1f7142db2e1737a66a/f1512/pessimistic.webp 200w,\\n/static/322e755d1d070e1f7142db2e1737a66a/f59aa/pessimistic.webp 400w,\\n/static/322e755d1d070e1f7142db2e1737a66a/47a22/pessimistic.webp 800w,\\n/static/322e755d1d070e1f7142db2e1737a66a/10c02/pessimistic.webp 960w\\\"\\n              sizes=\\\"(max-width: 800px) 100vw, 800px\\\"\\n              type=\\\"image/webp\\\"\\n            />\\n          <source\\n            srcset=\\\"/static/322e755d1d070e1f7142db2e1737a66a/f8f3a/pessimistic.png 200w,\\n/static/322e755d1d070e1f7142db2e1737a66a/6a8a8/pessimistic.png 400w,\\n/static/322e755d1d070e1f7142db2e1737a66a/7842b/pessimistic.png 800w,\\n/static/322e755d1d070e1f7142db2e1737a66a/7d769/pessimistic.png 960w\\\"\\n            sizes=\\\"(max-width: 800px) 100vw, 800px\\\"\\n            type=\\\"image/png\\\"\\n          />\\n          <img\\n            class=\\\"gatsby-resp-image-image\\\"\\n            src=\\\"/static/322e755d1d070e1f7142db2e1737a66a/7842b/pessimistic.png\\\"\\n            alt=\\\"비관적 락 동작 방식\\\"\\n            title=\\\"\\\"\\n            loading=\\\"lazy\\\"\\n            decoding=\\\"async\\\"\\n            style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n          />\\n        </picture>\\n  </a>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"트랜잭션의 충돌이 발생한다고 가정하고, 데이터 접근 시점에 우선 락을 선점하여 다른 트랜잭션의 접근을 차단\"), \"\\n\", React.createElement(_components.li, null, \"데이터베이스가 제공하는 락 기능을 사용\"), \"\\n\", React.createElement(_components.li, null, \"주로 SQL 쿼리에 \", React.createElement(_components.code, null, \"SELECT ... FOR UPDATE\"), \" 구문을 사용하면서 시작하며, 버전 정보는 사용하지 않음\"), \"\\n\", React.createElement(_components.li, null, \"데이터를 수정하는 즉시 트랜잭션 충돌을 감지할 수 있다.\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"비관적 락은 DB 레벨에서 락을 거는 방식입니다. JPA에서는 \", React.createElement(_components.code, null, \"@Lock\"), \" 어노테이션을 사용하여 구현할 수 있습니다.\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"java\\\"><pre class=\\\"language-java\\\"><code class=\\\"language-java\\\"><span class=\\\"token annotation punctuation\\\">@Lock</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token class-name\\\">LockModeType</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">PESSIMISTIC_WRITE</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token annotation punctuation\\\">@Query</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"select c from Coupon c where c.id = :id\\\"</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token class-name\\\">Optional</span><span class=\\\"token generics\\\"><span class=\\\"token punctuation\\\">&lt;</span><span class=\\\"token class-name\\\">Coupon</span><span class=\\\"token punctuation\\\">></span></span> <span class=\\\"token function\\\">findByIdWithLock</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token class-name\\\">Long</span> id<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"Select가 일어날 때 다음과 같이 동작합니다.\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"sql\\\"><pre class=\\\"language-sql\\\"><code class=\\\"language-sql\\\"><span class=\\\"token keyword\\\">SELECT</span> <span class=\\\"token operator\\\">*</span> <span class=\\\"token keyword\\\">FROM</span> coupon <span class=\\\"token keyword\\\">WHERE</span> id <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">1</span> <span class=\\\"token keyword\\\">FOR</span> <span class=\\\"token keyword\\\">UPDATE</span><span class=\\\"token punctuation\\\">;</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"이제 쿠폰 수량 조회시, 해당 메서드를 사용하면 Update에 대한 트랜잭션에서 자동으로 락이 걸리게 됩니다.\"), \"\\n\", React.createElement(_components.h3, null, \"장점\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"데이터 정합성이 매우 높음\"), \"\\n\", React.createElement(_components.li, null, \"동시 수정으로 인한 충돌을 원천 차단\"), \"\\n\", React.createElement(_components.li, null, \"구현 및 이해가 비교적 단순\"), \"\\n\"), \"\\n\", React.createElement(_components.h3, null, \"단점\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"락 대기로 인한 \", React.createElement(_components.strong, null, \"성능 저하\")), \"\\n\", React.createElement(_components.li, null, \"데드락 발생 가능\"), \"\\n\", React.createElement(_components.li, null, \"트래픽이 많을수록 확장성에 불리\"), \"\\n\"), \"\\n\", React.createElement(_components.h3, null, \"적합한 상황\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"충돌 가능성이 높은 경우\"), \"\\n\", React.createElement(_components.li, null, \"데이터 정합성이 최우선인 경우\"), \"\\n\", React.createElement(_components.li, null, \"트랜잭션 수가 많지 않은 시스템\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.strong, null, \"느낀 점\")), \"\\n\", React.createElement(_components.p, null, \"데이터 정합성은 완벽하게 보장되었지만, 부하 테스트를 해보니 처리 속도가 많이 느려졌습니다. 대기하는 요청들이 쌓이면서 타임아웃이 발생하는 경우도 있었습니다. 트래픽이 많은 상황에서는 부담스러운 방식이라는 생각이 들었습니다.\"), \"\\n\", React.createElement(_components.h2, null, \"낙관적 락 (Optimistic Lock)\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/968b8c2971fb4c0ec4799dd6b1bb9f5f/7d769/optimistic.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 56.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/UlEQVR42nWQS2sUQRSF86cEJS4URUQwEf0v0YU/wY24F1fu1ZgJYkYNGUVNhMw4ECX29Gt6urrr0V3V9bjVj7JnHAQXXi53ceCrc+psSGvnUp5jHFeVstY517Zg+KxMIzL3eBaAxr3YNEoXfrEIcTwTmd8A6cUNDPA+il6Px6M0xVq7zgFUHB0lP49m0yENR4p7bS9qWiSj+MehPx2yaAQyWMIE4FOWfQjDr5SiStTWVlWpi3cFGmTRrqSDWs+6zlngujig6W4WvdRsH1TQ9XCu9TchpgAnnGOluqbVumrUIbAXInhmqwHIXytn1umPNXkD/vNGHfXw2nmE0IHnfSYkJGSRzBmthHyCzM2A3sWwbfRk+edaNPqtxE+r8FFtXjUmXsOHSbJ/dtaHz6Xs2gZMy4rHAb0RF1vE3tLqdAlbW5qHxF2k7go292oTuj+x+8BjpU7Kkhizaru28kyL77aaGHFaQ76EwXKzk7ebeX2NwHZt/FXbxnwpyxMhjssyk1IKofrO/5lu5VwL+yDRl4PiOrF31nBmzBShZDI5XywixnKE0HzOSc4x4mS1jPZvloxTeZ+5S8xdxbBl/8KnCIW+P07TVAhQigQ+9jzir26/81gbI7mgYmdhLuTNJoHba2fbtkjrWOv+1m3r/jNda6U4JnSPiz2lho1lzrnfzs5Uz7g/W64AAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n  ></span>\\n  <picture>\\n          <source\\n              srcset=\\\"/static/968b8c2971fb4c0ec4799dd6b1bb9f5f/f1512/optimistic.webp 200w,\\n/static/968b8c2971fb4c0ec4799dd6b1bb9f5f/f59aa/optimistic.webp 400w,\\n/static/968b8c2971fb4c0ec4799dd6b1bb9f5f/47a22/optimistic.webp 800w,\\n/static/968b8c2971fb4c0ec4799dd6b1bb9f5f/10c02/optimistic.webp 960w\\\"\\n              sizes=\\\"(max-width: 800px) 100vw, 800px\\\"\\n              type=\\\"image/webp\\\"\\n            />\\n          <source\\n            srcset=\\\"/static/968b8c2971fb4c0ec4799dd6b1bb9f5f/f8f3a/optimistic.png 200w,\\n/static/968b8c2971fb4c0ec4799dd6b1bb9f5f/6a8a8/optimistic.png 400w,\\n/static/968b8c2971fb4c0ec4799dd6b1bb9f5f/7842b/optimistic.png 800w,\\n/static/968b8c2971fb4c0ec4799dd6b1bb9f5f/7d769/optimistic.png 960w\\\"\\n            sizes=\\\"(max-width: 800px) 100vw, 800px\\\"\\n            type=\\\"image/png\\\"\\n          />\\n          <img\\n            class=\\\"gatsby-resp-image-image\\\"\\n            src=\\\"/static/968b8c2971fb4c0ec4799dd6b1bb9f5f/7842b/optimistic.png\\\"\\n            alt=\\\"낙관적 락\\\"\\n            title=\\\"\\\"\\n            loading=\\\"lazy\\\"\\n            decoding=\\\"async\\\"\\n            style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n          />\\n        </picture>\\n  </a>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"트랜잭션 대부분은 충돌이 발생하지 않는다고 낙관적으로 가정\"), \"\\n\", React.createElement(_components.li, null, \"락을 걸지 않고 처리한 뒤, 커밋 시점에 충돌 여부를 확인\"), \"\\n\", React.createElement(_components.li, null, \"트랜잭션을 커밋하기 전까지는 트랜잭션의 충돌을 알 수 없음\"), \"\\n\", React.createElement(_components.li, null, \"데이터베이스가 제공하는 락 기능이 아닌 JPA가 제공하는 버전 관리 기능을 사용\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"낙관적 락은 버전 컬럼을 추가하고 수정 시점에 버전을 체크하여 충돌을 방지하는 방법입니다.\"), \"\\n\", React.createElement(_components.p, null, \"JPA의 버전 관리 기능에 의해 작동합니다. \", React.createElement(_components.code, null, \"@Version\"), \" 어노테이션을 엔티티에 추가하면 버전 컬럼을 추가할 수 있습니다.\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"java\\\"><pre class=\\\"language-java\\\"><code class=\\\"language-java\\\"><span class=\\\"token annotation punctuation\\\">@Version</span>\\n<span class=\\\"token keyword\\\">private</span> <span class=\\\"token class-name\\\">Long</span> version<span class=\\\"token punctuation\\\">;</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"java\\\"><pre class=\\\"language-java\\\"><code class=\\\"language-java\\\"><span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">void</span> <span class=\\\"token function\\\">issueOptimistic</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token class-name\\\">Long</span> couponId<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">throws</span> <span class=\\\"token class-name\\\">InterruptedException</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">int</span> retryCount <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">int</span> maxRetry <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">10</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token keyword\\\">while</span> <span class=\\\"token punctuation\\\">(</span>retryCount <span class=\\\"token operator\\\">&lt;</span> maxRetry<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">try</span> <span class=\\\"token punctuation\\\">{</span>\\n            couponService<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">issueOptimistic</span><span class=\\\"token punctuation\\\">(</span>couponId<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n            <span class=\\\"token keyword\\\">return</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">catch</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token class-name\\\">ObjectOptimisticLockingFailureException</span> e<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            retryCount<span class=\\\"token operator\\\">++</span><span class=\\\"token punctuation\\\">;</span>\\n            <span class=\\\"token class-name\\\">Thread</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">sleep</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">50</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token keyword\\\">throw</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">IllegalStateException</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"쿠폰 발급 재시도 한도 초과\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"이제 \", React.createElement(_components.code, null, \"Coupon\"), \" 엔티티에 버전 컬럼이 추가되고, JPA는 업데이트 시점에 업데이트 전에 읽었던 버전과 현재 버전을 체크합니다.\"), \"\\n\", React.createElement(_components.p, null, \"두 버전이 달라 충돌이 발생하면 \", React.createElement(_components.code, null, \"ObjectOptimisticLockingFailureException\"), \"이 발생하고, Facade 계층에서 재시도 로직을 구현했습니다.\"), \"\\n\", React.createElement(_components.h3, null, \"장점\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"락을 사용하지 않아 \", React.createElement(_components.strong, null, \"성능과 확장성 우수\")), \"\\n\", React.createElement(_components.li, null, \"데드락 발생 없음\"), \"\\n\", React.createElement(_components.li, null, \"읽기 위주의 시스템에 적합\"), \"\\n\"), \"\\n\", React.createElement(_components.h3, null, \"단점\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"충돌 발생 시 재시도 로직 필요\"), \"\\n\", React.createElement(_components.li, null, \"충돌이 잦으면 오히려 성능 저하\"), \"\\n\", React.createElement(_components.li, null, \"구현 복잡도가 상대적으로 높음\"), \"\\n\"), \"\\n\", React.createElement(_components.h3, null, \"적합한 상황\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"읽기 비중이 높은 경우\"), \"\\n\", React.createElement(_components.li, null, \"동시 수정 가능성이 낮은 경우\"), \"\\n\", React.createElement(_components.li, null, \"대규모 트래픽 환경\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.strong, null, \"느낀 점\")), \"\\n\", React.createElement(_components.p, null, \"비관적 락보다는 성능이 좋았지만, 동시 요청이 많을 때 재시도가 빈번하게 발생하면서 오히려 비효율적이었습니다. 충돌이 적은 환경에서는 좋은 선택일 것 같다는 생각이 들었습니다.\"), \"\\n\", React.createElement(_components.h2, null, \"Redis 분산 락 (Distributed Lock)\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/e160d6eff414563b7a8735e2b4d5bfe2/7d769/redis-lock.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 56.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACD0lEQVR42l1SyXLTQBD1p3HiQHGCD+GQP+CQD+AvuFDFlYIYkuAlkpdsVdhaLGtG0ljS7ItGshIzyg26q15VH173e9090l0HpdwgBKQ0x+PRZKrcYRhylLQCNscWKv0IYcK47kzDEo5SDCNZJl1Tjqqm8Shdce4QW9u4PmAdbuZZsrT0Dlv9MwXjOLrM8oPhpvbS7Sx4uMRg2ulohNv2htJ5VXmMEaNznk8xXnDhym22jTN4CeBFHP+COTYcsM0EwTkCt2SnDRjIk8NhnCQzjGslIQG/i2iOokmZxgRQI30ulk4XE7WmKY98ZddS+ZxiWQyyF0LcD8ip7Wvp5d27PX8P7dtKfSbmyWPEZ/SG8trQPd1Oa+oT4pEDUcUw+Rqh72E4rapSmhwvQ3UWsLNQf4jQ1wSWF7voWxCMASwFjvF2Ulcerj1cDOTaWmdvQanPWK2NFHmOAWJZTjLKYCXFNYBXaTrJi00c3MN0SvpZ3U4rSRQaVdb6nK+Vs8EPUvat7VrVWe2w72wp5ZLgNaULghETaf3lAX+8Q+d/6DmR4TDZ0VZCLDh3pzqdTs8uT88veKJt6wuxUtITrNQ9Vp+y9tWevyna11TeDwubOc1CzF/u/B+ZWDsG4Mdud1WgGOw3cL1iwR3brvADlXDU9X3ZNLkxrsvx6en0b7j/e2TsltJHxnmjGxVIFSkVu59sbfkXSchRoUYHzBoAAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n  ></span>\\n  <picture>\\n          <source\\n              srcset=\\\"/static/e160d6eff414563b7a8735e2b4d5bfe2/f1512/redis-lock.webp 200w,\\n/static/e160d6eff414563b7a8735e2b4d5bfe2/f59aa/redis-lock.webp 400w,\\n/static/e160d6eff414563b7a8735e2b4d5bfe2/47a22/redis-lock.webp 800w,\\n/static/e160d6eff414563b7a8735e2b4d5bfe2/10c02/redis-lock.webp 960w\\\"\\n              sizes=\\\"(max-width: 800px) 100vw, 800px\\\"\\n              type=\\\"image/webp\\\"\\n            />\\n          <source\\n            srcset=\\\"/static/e160d6eff414563b7a8735e2b4d5bfe2/f8f3a/redis-lock.png 200w,\\n/static/e160d6eff414563b7a8735e2b4d5bfe2/6a8a8/redis-lock.png 400w,\\n/static/e160d6eff414563b7a8735e2b4d5bfe2/7842b/redis-lock.png 800w,\\n/static/e160d6eff414563b7a8735e2b4d5bfe2/7d769/redis-lock.png 960w\\\"\\n            sizes=\\\"(max-width: 800px) 100vw, 800px\\\"\\n            type=\\\"image/png\\\"\\n          />\\n          <img\\n            class=\\\"gatsby-resp-image-image\\\"\\n            src=\\\"/static/e160d6eff414563b7a8735e2b4d5bfe2/7842b/redis-lock.png\\\"\\n            alt=\\\"Redis 분산 락\\\"\\n            title=\\\"\\\"\\n            loading=\\\"lazy\\\"\\n            decoding=\\\"async\\\"\\n            style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n          />\\n        </picture>\\n  </a>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"여러 서버 인스턴스에서 동시에 접근하더라도 하나의 요청만 임계 구역에 진입하도록 제어\"), \"\\n\", React.createElement(_components.li, null, \"데이터베이스 락이 아닌 외부 저장소(Redis) 를 이용해 락 상태를 관리\"), \"\\n\", React.createElement(_components.li, null, \"서버 간 메모리를 공유하지 않는 환경에서도 동일한 락을 사용할 수 있음\"), \"\\n\", React.createElement(_components.li, null, \"락 획득 여부를 명시적으로 제어할 수 있음\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"Redis 분산 락은 DB 락의 성능 문제와 단일 서버 환경의 한계를 보완하기 위해 사용했습니다.\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 385px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/aaa28f41fd60099ff6062a746a16294f/d7aa9/redis.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 34%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAABeElEQVR42mP48/HDx83rnlcUvGqpfV6e92nvzv/fv/0Hgn///v+H0CDG379/geSvX7+ePXv+8dMniDjDs5ykLxtWP68ueZqTfMpIc4OC1GUvxw/nzgClv339+u79e6DSFy9fApV+//798JEjEydNfvz4yfv37z99/sywW0vlvJfzk7zUN2115020d+lrrpcQerRxA1DzzBkzO7q6pk2f0dPbt2rNmgWLFjW1tDa2tC5dtry6rg5oEMNuHfVt6go7NFV26apt01LZY6C1Q0Xu6dbNQM0zZsw4dvxEZXXN6jVrK6qq165bf+ny5czsnHkLFkyZNm3S5MkMO1TlgBr26Gvu1lPfY6C9W09jozDvo/VrgZp3bN/+4ePHvfv2zZg169HjxytXr+7u7QPav3vP3vkLF63fsIFht4fLViVZoG07NJS2KUptN9Y7Vpj/+fFjeFBBGHA2MmD48fHj3U2bDsVF73KwudDd9e7uXbgcMIT/Qch///5iAwDvfy7oE1VUiQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\\\"\\n  ></span>\\n  <picture>\\n          <source\\n              srcset=\\\"/static/aaa28f41fd60099ff6062a746a16294f/f1512/redis.webp 200w,\\n/static/aaa28f41fd60099ff6062a746a16294f/11803/redis.webp 385w\\\"\\n              sizes=\\\"(max-width: 385px) 100vw, 385px\\\"\\n              type=\\\"image/webp\\\"\\n            />\\n          <source\\n            srcset=\\\"/static/aaa28f41fd60099ff6062a746a16294f/f8f3a/redis.png 200w,\\n/static/aaa28f41fd60099ff6062a746a16294f/d7aa9/redis.png 385w\\\"\\n            sizes=\\\"(max-width: 385px) 100vw, 385px\\\"\\n            type=\\\"image/png\\\"\\n          />\\n          <img\\n            class=\\\"gatsby-resp-image-image\\\"\\n            src=\\\"/static/aaa28f41fd60099ff6062a746a16294f/d7aa9/redis.png\\\"\\n            alt=\\\"Redis\\\"\\n            title=\\\"\\\"\\n            loading=\\\"lazy\\\"\\n            decoding=\\\"async\\\"\\n            style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n          />\\n        </picture>\\n  </a>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"이번 구현에서는 Redisson 라이브러리를 사용하여 분산 락을 적용했습니다.\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"java\\\"><pre class=\\\"language-java\\\"><code class=\\\"language-java\\\"><span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">void</span> <span class=\\\"token function\\\">issueCouponWithDistributedLock</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token class-name\\\">Long</span> couponId<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token class-name\\\">RLock</span> lock <span class=\\\"token operator\\\">=</span> redissonClient<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getLock</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"coupon_lock:\\\"</span> <span class=\\\"token operator\\\">+</span> couponId<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">boolean</span> isLocked <span class=\\\"token operator\\\">=</span> <span class=\\\"token boolean\\\">false</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token keyword\\\">try</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token comment\\\">// waitTime: 락 획득을 최대 5초까지 대기</span>\\n        <span class=\\\"token comment\\\">// leaseTime: 10초 후 자동으로 락 해제</span>\\n        isLocked <span class=\\\"token operator\\\">=</span> lock<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">tryLock</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">5</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">10</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token class-name\\\">TimeUnit</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">SECONDS</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n        <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token operator\\\">!</span>isLocked<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token keyword\\\">throw</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">IllegalStateException</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"락 획득 실패\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n\\n        <span class=\\\"token comment\\\">// === 임계 구역 ===</span>\\n        <span class=\\\"token class-name\\\">Coupon</span> coupon <span class=\\\"token operator\\\">=</span> couponRepository<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">findById</span><span class=\\\"token punctuation\\\">(</span>couponId<span class=\\\"token punctuation\\\">)</span>\\n            <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">orElseThrow</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n        <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>coupon<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getQuantity</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">&lt;=</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token keyword\\\">throw</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">SoldoutException</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n\\n        coupon<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">decrease</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        couponRepository<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">save</span><span class=\\\"token punctuation\\\">(</span>coupon<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">catch</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token class-name\\\">InterruptedException</span> e<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token class-name\\\">Thread</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">currentThread</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">interrupt</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">throw</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">RuntimeException</span><span class=\\\"token punctuation\\\">(</span>e<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">finally</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>isLocked <span class=\\\"token operator\\\">&amp;&amp;</span> lock<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">isHeldByCurrentThread</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            lock<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">unlock</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.h3, null, \"장점\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"분산 환경에서 데이터 정합성 확보 가능\"), \"\\n\", React.createElement(_components.li, null, \"애플리케이션 레벨에서 제어 가능\"), \"\\n\"), \"\\n\", React.createElement(_components.h3, null, \"단점\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"구현 및 운영 난이도 높음\"), \"\\n\", React.createElement(_components.li, null, \"네트워크 및 외부 시스템 장애에 민감\"), \"\\n\", React.createElement(_components.li, null, \"잘못 설계 시 심각한 장애 유발 가능\"), \"\\n\"), \"\\n\", React.createElement(_components.h3, null, \"적합한 상황\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"다중 서버에서 동일 자원을 제어해야 하는 경우\"), \"\\n\", React.createElement(_components.li, null, \"배치 작업, 쿠폰 발급, 재고 차감, 스케줄러 중복 실행 방지 등\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.strong, null, \"느낀 점\")), \"\\n\", React.createElement(_components.p, null, \"DB 락보다 가볍고, 멀티 서버 환경에서도 동작해서 적절한 균형점을 찾은 느낌이었습니다. 다만 Redis가 장애나면 전체 시스템에 영향을 줄 수 있다는 점은 고려해야 했습니다.\"), \"\\n\", React.createElement(_components.h2, null, \"Redis Queue 방식\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/26f7e7c614466d6ec8cc777715f92b0d/7d769/redis-queue.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 56.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACC0lEQVR42n1RTW/TQBDND0LiiEDiAif+DQeEhJCgEjeEuPADuPXGgQsHECoqpU3auEmbhnhtx3G89VfszXq9u7NrO3ZIUhCcGD1pRvOheTOvs/6vrWqpcpMliEYTkZl1me3S7U21s/Ft+xc3FQqQCl4167rKYTHxLq/GJ93ct2oVbhpAKwGwHdbCBtYrRb+WBhTn65VellUf42PbnguoK7bivZZfNPyiZmdNGUVSj5ZkRIjPeUfmPUi7ATKQ8ZX6gwZwIHU/iS+y9CpNNUiQ75l+nMNTpp41JfZkeZKlPUJQUXQk66vMIDPnenLJAxPYdL4gyLYcy3LDgHOdy5dY3Zou70b6vuKOy+CzbX1xHHuzGVi/pD+uf45tY0DmAy1mXkZHnod834xipYQS+1Q8z8Vezl+Vwp8V8iiOTtLU2tJmp5p+jy3kj8aZN1TcnafLydRBljWNAsaAyb20vhPCw6x8VCvXEzvay+V2WENS8W4ljFoOSn5cw3xK8kN3ehoEoyxTUqTkwxC9OB+/Qe5+Enpmkn7D+DAMt7RvFGt31uyk2hza9bxzjMdxTCnB+MAYfrIdI4hOaYYRoUOADazNw3a6/ha93QUx5xPHQcicJVHBVC6fJKvbWDxIyntaWG6hD+PoaLEw/2xu/8FaVJWT54jSBUBTV1J+JPx1xt5S/g54mBTy7BqfBUEE8Av2tFLquypwMgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\\\"\\n  ></span>\\n  <picture>\\n          <source\\n              srcset=\\\"/static/26f7e7c614466d6ec8cc777715f92b0d/f1512/redis-queue.webp 200w,\\n/static/26f7e7c614466d6ec8cc777715f92b0d/f59aa/redis-queue.webp 400w,\\n/static/26f7e7c614466d6ec8cc777715f92b0d/47a22/redis-queue.webp 800w,\\n/static/26f7e7c614466d6ec8cc777715f92b0d/10c02/redis-queue.webp 960w\\\"\\n              sizes=\\\"(max-width: 800px) 100vw, 800px\\\"\\n              type=\\\"image/webp\\\"\\n            />\\n          <source\\n            srcset=\\\"/static/26f7e7c614466d6ec8cc777715f92b0d/f8f3a/redis-queue.png 200w,\\n/static/26f7e7c614466d6ec8cc777715f92b0d/6a8a8/redis-queue.png 400w,\\n/static/26f7e7c614466d6ec8cc777715f92b0d/7842b/redis-queue.png 800w,\\n/static/26f7e7c614466d6ec8cc777715f92b0d/7d769/redis-queue.png 960w\\\"\\n            sizes=\\\"(max-width: 800px) 100vw, 800px\\\"\\n            type=\\\"image/png\\\"\\n          />\\n          <img\\n            class=\\\"gatsby-resp-image-image\\\"\\n            src=\\\"/static/26f7e7c614466d6ec8cc777715f92b0d/7842b/redis-queue.png\\\"\\n            alt=\\\"Redis Queue 방식\\\"\\n            title=\\\"\\\"\\n            loading=\\\"lazy\\\"\\n            decoding=\\\"async\\\"\\n            style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n          />\\n        </picture>\\n  </a>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"동시 요청을 즉시 처리하지 않고 \", React.createElement(_components.strong, null, \"큐에 적재한 뒤 순차적으로 처리\")), \"\\n\", React.createElement(_components.li, null, \"락을 사용하지 않고, 요청 흐름 자체를 직렬화(serialization)하여 동시성 문제를 제거\"), \"\\n\", React.createElement(_components.li, null, \"요청 시점과 실제 처리 시점을 분리함으로써 DB 동시 접근을 최소화\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"Redis Queue 방식은 락을 통한 동시성 제어 대신,\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.strong, null, \"요청을 큐에 쌓고 하나씩 처리하는 구조\"), \"로 문제를 해결하는 접근입니다.\"), \"\\n\", React.createElement(_components.h3, null, \"Producer: 요청 적재\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"java\\\"><pre class=\\\"language-java\\\"><code class=\\\"language-java\\\"><span class=\\\"token function\\\">pushToQueue</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token class-name\\\">Long</span> userId<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    redisTemplate<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">opsForList</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">rightPush</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"coupon_queue\\\"</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token class-name\\\">String</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">valueOf</span><span class=\\\"token punctuation\\\">(</span>userId<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.h3, null, \"Consumer: 순차 처리\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"java\\\"><pre class=\\\"language-java\\\"><code class=\\\"language-java\\\"><span class=\\\"token annotation punctuation\\\">@Scheduled</span><span class=\\\"token punctuation\\\">(</span>fixedDelay <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">100</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token keyword\\\">public</span> <span class=\\\"token keyword\\\">void</span> <span class=\\\"token function\\\">couponEventScheduler</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">while</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token class-name\\\">Long</span> userId <span class=\\\"token operator\\\">=</span> couponRedisRepository<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">popFromQueue</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>userId <span class=\\\"token operator\\\">==</span> <span class=\\\"token keyword\\\">null</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token keyword\\\">break</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n\\n        <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>isSoldOut<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token keyword\\\">continue</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n\\n        <span class=\\\"token keyword\\\">try</span> <span class=\\\"token punctuation\\\">{</span>\\n            couponService<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">publish</span><span class=\\\"token punctuation\\\">(</span>userId<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">catch</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token class-name\\\">SoldoutException</span> e<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            isSoldOut <span class=\\\"token operator\\\">=</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">;</span>\\n            <span class=\\\"token class-name\\\">System</span><span class=\\\"token punctuation\\\">.</span>out<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">println</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"선착순 쿠폰이 마감되었습니다.\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"Scheduler가 주기적으로 큐에서 데이터를 하나씩 꺼내어\\n쿠폰 발급 로직을 순차적으로 수행합니다.\"), \"\\n\", React.createElement(_components.h3, null, \"장점\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"락 경쟁이 없어 \", React.createElement(_components.strong, null, \"Race Condition 자체가 발생하지 않음\")), \"\\n\", React.createElement(_components.li, null, \"DB에 동시에 접근하는 요청 수를 크게 줄일 수 있음\"), \"\\n\", React.createElement(_components.li, null, \"선착순 처리 요구사항을 자연스럽게 만족\"), \"\\n\", React.createElement(_components.li, null, \"구조가 비교적 단순하고 직관적임\"), \"\\n\"), \"\\n\", React.createElement(_components.h3, null, \"단점\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"즉시 처리(동기 응답)가 어려움\"), \"\\n\", React.createElement(_components.li, null, \"비동기 처리에 대한 사용자 경험(대기, 알림 등) 고려 필요\"), \"\\n\", React.createElement(_components.li, null, \"Scheduler가 단일 Consumer로 동작한다는 전제 필요\"), \"\\n\", React.createElement(_components.li, null, \"대량 트래픽 시 큐 적체 관리 필요\"), \"\\n\"), \"\\n\", React.createElement(_components.h3, null, \"적합한 상황\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"선착순, 예약, 응모와 같이 \", React.createElement(_components.strong, null, \"순서가 중요한 기능\")), \"\\n\", React.createElement(_components.li, null, \"즉시 응답이 필수가 아닌 경우\"), \"\\n\", React.createElement(_components.li, null, \"대량의 동시 요청을 안정적으로 제어해야 하는 경우\"), \"\\n\", React.createElement(_components.li, null, \"처리량보다 \", React.createElement(_components.strong, null, \"정합성과 안정성\"), \"이 중요한 시스템\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.strong, null, \"느낀 점\")), \"\\n\", React.createElement(_components.p, null, \"락을 사용하지 않고도 동시성 문제를 구조적으로 해결할 수 있다는 점이 인상적이었습니다.\"), \"\\n\", React.createElement(_components.p, null, \"요청을 순차적으로 처리하기 때문에 안정성이 높았고,\\nDB에 동시에 접근하는 상황을 거의 만들지 않는다는 점에서 가장 깔끔한 해결 방식이라는 느낌을 받았습니다.\"), \"\\n\", React.createElement(_components.p, null, \"다만 즉시 응답을 주기 어렵기 때문에, 비동기 처리 결과를 사용자에게 어떻게 안내할지에 대한 고민은 필요하다고 느꼈습니다.\"), \"\\n\", React.createElement(_components.h2, null, \"확장 가능성 및 추가로 고민해볼 내용\"), \"\\n\", React.createElement(_components.p, null, \"이번에는 Redis Queue를 활용해 동시성 문제를 구조적으로 해결했지만,\"), \"\\n\", React.createElement(_components.p, null, \"이 방식 역시 \", React.createElement(_components.strong, null, \"모든 상황에서 완벽한 해답은 아니라는 점\"), \"도 함께 느낄 수 있었습니다.\"), \"\\n\", React.createElement(_components.p, null, \"Redis Queue 방식은 안정적이고 구현이 단순하다는 장점이 있지만,\\n트래픽이 더 커지거나 처리량을 더 끌어올려야 하는 상황에서는\"), \"\\n\", React.createElement(_components.p, null, \"다음과 같은 한계가 존재합니다.\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"단일 Consumer(Scheduler) 기반 처리\"), \"\\n\", React.createElement(_components.li, null, \"처리 속도가 큐 소비 속도에 의존\"), \"\\n\", React.createElement(_components.li, null, \"장애 발생 시 메시지 유실 가능성\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"이러한 한계를 보완하기 위한 다음 단계로는\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.strong, null, \"이벤트 기반 아키텍처\"), \"를 고려해볼 수 있을 것 같습니다.\"), \"\\n\", React.createElement(_components.h3, null, \"고려해볼 수 있는 확장 방향\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"Kafka 기반 이벤트 처리\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"대량 트래픽을 안정적으로 처리\"), \"\\n\", React.createElement(_components.li, null, \"메시지 영속성 보장\"), \"\\n\", React.createElement(_components.li, null, \"장애 발생 시에도 데이터 유실 최소화\"), \"\\n\"), \"\\n\"), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"Consumer Group을 통한 수평 확장\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"여러 Consumer가 동시에 메시지를 분산 처리\"), \"\\n\", React.createElement(_components.li, null, \"처리량 증가에 유연하게 대응 가능\"), \"\\n\"), \"\\n\"), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"메시지 재처리(Replay) 전략\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"장애나 오류 발생 시 특정 시점부터 재처리 가능\"), \"\\n\", React.createElement(_components.li, null, \"운영 안정성 확보에 유리\"), \"\\n\"), \"\\n\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"이번 구현에서는 Redis Queue로 충분했지만,\\n트래픽 규모가 커질수록 \", React.createElement(_components.strong, null, \"“단순한 큐”에서 “스트리밍 플랫폼”으로의 전환\"), \"이\\n자연스러운 수순이라는 점을 느꼈습니다.\"), \"\\n\", React.createElement(_components.h2, null, \"마무리\"), \"\\n\", React.createElement(_components.p, null, \"이번 실습을 통해,\\n동시성 문제에는 \", React.createElement(_components.strong, null, \"하나의 정답이 존재하지 않는다\"), \"는 점을 다시 한 번 느꼈습니다.\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"Pessimistic Lock\"), \": 정합성은 확실하지만 성능 부담 큼\"), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"Optimistic Lock\"), \": 충돌이 적을 때 효과적\"), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"Redis 분산 락\"), \": 멀티 서버 환경에서 현실적인 선택지\"), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"Redis Queue\"), \": 구조적으로 안전하지만 비동기 처리 고려 필요\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"결국 중요한 것은\"), \"\\n\", React.createElement(_components.p, null, \"“어떤 락을 쓰느냐”가 아니라,\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.strong, null, \"시스템의 특성, 트래픽 패턴, 사용자 경험을 종합적으로 고려해\\n가장 적절한 방식을 선택하는 것\"), \"이라는 점이었습니다.\"), \"\\n\", React.createElement(_components.p, null, \"특히 동시성 문제는\"), \"\\n\", React.createElement(_components.p, null, \"단순히 락을 걸어 해결할 수 있는 문제가 아니라,\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.strong, null, \"아키텍처와 흐름 설계의 문제\"), \"라는 점이 인상 깊게 남았습니다.\"));\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? React.createElement(MDXLayout, props, React.createElement(_createMdxContent, props)) : _createMdxContent(props);\n}\nexport default MDXContent;\n","import GATSBY_COMPILED_MDX from \"/home/runner/work/aaxx98.github.io/aaxx98.github.io/content/til/20260106/til-20260106.mdx\";\nimport * as React from 'react';\nimport Layout from '../../components/layout';\nimport Comment from '../../components/post/comment';\nimport PostContent from '../../components/post/post-content';\nimport PostTags from '../../components/post/post-tags';\nimport Seo from '../../components/seo';\nimport CollapsibleTOC from '../../components/post/toc';\nfunction BlogPost(_ref) {\n  let {data, children} = _ref;\n  return React.createElement(Layout, null, React.createElement(PostContent, {\n    data: data\n  }), React.createElement(\"section\", {\n    className: \"post-body-container\"\n  }, React.createElement(CollapsibleTOC, null), React.createElement(\"div\", {\n    className: \"post-body\"\n  }, children), React.createElement(\"div\", {\n    className: \"post-tags-area\"\n  }, React.createElement(PostTags, {\n    tags: data.mdx.frontmatter.tags,\n    isLinked: true\n  })), React.createElement(\"div\", {\n    className: \"post-top-wrap\"\n  }, React.createElement(\"button\", {\n    onClick: () => window.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    }),\n    className: \"post-top-button\",\n    \"aria-label\": \"\\uB9E8 \\uC704\\uB85C \\uC774\\uB3D9\"\n  }, \"\\u2191 TOP\"))), React.createElement(\"section\", {\n    className: \"comment-section\"\n  }, React.createElement(Comment, null)));\n}\nconst query = \"3479210645\";\nexport function Head(_ref2) {\n  let {data} = _ref2;\n  return React.createElement(Seo, {\n    title: data.mdx.frontmatter.title\n  });\n}\nBlogPost\nexport default function GatsbyMDXWrapper(props) {\n  return React.createElement(BlogPost, props, React.createElement(GATSBY_COMPILED_MDX, props));\n}\n","import React, { useState, useEffect } from 'react';\n\ninterface TocItem {\n  id: string;\n  text: string;\n  level: number;\n  element: HTMLElement;\n}\n\nconst CollapsibleTOC = () => {\n  const [isOpen, setIsOpen] = useState<boolean>(false);\n  const [tocItems, setTocItems] = useState<TocItem[]>([]);\n\n  useEffect(() => {\n    const headings = document.querySelectorAll<HTMLHeadingElement>('h1, h2, h3, h4, h5, h6');\n    const items: TocItem[] = Array.from(headings).map((heading, index) => {\n      if (!heading.id) {\n        heading.id = `heading-${index}`;\n      }\n\n      return {\n        id: heading.id,\n        text: heading.textContent || '',\n        level: parseInt(heading.tagName.charAt(1), 10),\n        element: heading,\n      };\n    });\n\n    setTocItems(items);\n  }, []);\n\n  const scrollToHeading = (id: string) => {\n    const element = document.getElementById(id);\n    if (element) {\n      const headerOffset = 80;\n      const elementPosition = element.offsetTop;\n      const offsetPosition = elementPosition - headerOffset;\n\n      window.scrollTo({\n        top: offsetPosition,\n        behavior: 'smooth',\n      });\n    }\n  };\n\n  if (tocItems.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"toc-container\">\n      <button\n        className=\"toc-toggle\"\n        onClick={() => setIsOpen(!isOpen)}\n        aria-expanded={isOpen}\n        aria-controls=\"toc-content\"\n      >\n        <span className=\"toc-title\">목차</span>\n        <span className={`toc-arrow ${isOpen ? 'open' : ''}`}>▼</span>\n      </button>\n\n      <div id=\"toc-content\" className={`toc-content ${isOpen ? 'open' : ''}`}>\n        <nav className=\"toc-nav\">\n          <ul className=\"toc-list\">\n            {tocItems.map((item) => (\n              <li key={item.id} className={`toc-item level-${item.level} `}>\n                <button\n                  className=\"toc-link\"\n                  onClick={() => scrollToHeading(item.id)}\n                  title={item.text}\n                >\n                  {item.text}\n                </button>\n              </li>\n            ))}\n          </ul>\n        </nav>\n      </div>\n    </div>\n  );\n};\n\nexport default CollapsibleTOC;\n","const tagNames: Record<string, string> = {\n  gatsby: 'Gatsby',\n  react: 'React',\n  utterances: 'Utterances',\n  github: 'Github',\n  blog: '블로그',\n  seo: 'SEO',\n  'tailwind-css': 'Tailwind CSS',\n  bootcamp: '부트캠프후기',\n  'multi-campus': '멀티캠퍼스IT부트캠프',\n  'ureca-backend': 'LG U+ 유레카 3기 백엔드',\n  java: 'JAVA',\n  study: '스터디',\n  database: '데이터베이스',\n  sql: 'SQL',\n  conccurency: '동시성',\n  redis: 'Redis',\n};\nexport default tagNames;\n","import * as React from 'react';\n\nimport { faAngleRight } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Link } from 'gatsby';\n\ntype BreadcrumbProps = {\n  info: { name: string; url: string }[];\n};\n\nexport default function Breadcrumb({ info }: BreadcrumbProps) {\n  if (!info || info.length === 0) return null;\n\n  return (\n    <nav aria-label=\"breadcrumb\" className=\"breadcrumb\">\n      <ol className=\"breadcrumb-list\">\n        {info.map((item, idx) => {\n          const isLast = idx === info.length - 1;\n          return (\n            <li key={item.url || `${item.name}-${idx}`} className=\"breadcrumb-item\">\n              {isLast ? (\n                <span aria-current=\"page\" className=\"breadcrumb-current\">\n                  {item.name}\n                </span>\n              ) : (\n                <Link to={item.url} className=\"breadcrumb-link\">\n                  {item.name}\n                </Link>\n              )}\n              {!isLast && (\n                <span className=\"breadcrumb-sep\">\n                  <FontAwesomeIcon icon={faAngleRight} className=\"breadcrumb-sep-icon\" />\n                </span>\n              )}\n            </li>\n          );\n        })}\n      </ol>\n    </nav>\n  );\n}\n","import React, { useEffect, useRef, useState } from 'react';\n\nfunction Comment() {\n  const containerRef = useRef<HTMLDivElement | null>(null);\n  const [status, setStatus] = useState<'pending' | 'success' | 'failed'>('pending');\n\n  useEffect(() => {\n    const el = containerRef.current;\n    if (!el) return;\n\n    el.innerHTML = '';\n\n    const script = document.createElement('script');\n    script.src = 'https://utteranc.es/client.js';\n    script.async = true;\n    script.crossOrigin = 'anonymous';\n    script.setAttribute('repo', 'aaxx98/aaxx98.github.io');\n    script.setAttribute('issue-term', 'pathname');\n    script.setAttribute('theme', 'github-dark');\n\n    script.onload = () => setStatus('success');\n    script.onerror = () => setStatus('failed');\n\n    el.appendChild(script);\n\n    return () => {\n      el.innerHTML = '';\n    };\n  }, []);\n\n  return (\n    <section className=\"comment-container\" aria-label=\"댓글\">\n      {status === 'failed' && (\n        <div className=\"comment-status error\">\n          댓글을 불러오는 중 오류가 발생했습니다. 새로고침 후 다시 시도해주세요.\n        </div>\n      )}\n      {status === 'pending' && <div className=\"comment-status pending\">댓글을 불러오는 중...</div>}\n      <div ref={containerRef} className=\"utterances-container\" />\n    </section>\n  );\n}\n\nexport default Comment;\n","import * as React from 'react';\n\nimport { Link } from 'gatsby';\n\nimport tagNames from '../../code/tagName';\n\ntype PostTagProps = {\n  tags: string[];\n  isLinked?: boolean;\n};\n\nfunction PostTags({ tags, isLinked = false }: PostTagProps) {\n  return (\n    <div className=\"post-tags\">\n      {tags.map((tag: string) =>\n        isLinked ? (\n          <Link key={tag} to={`/tags/${tag}`} className=\"post-tag\">\n            #{tagNames[tag] || tag}\n          </Link>\n        ) : (\n          <div key={tag} className=\"post-tag\">\n            #{tagNames[tag] || tag}\n          </div>\n        ),\n      )}\n    </div>\n  );\n}\n\nexport default PostTags;\n"],"names":["_ref","data","React","className","mdx","frontmatter","title","date","Breadcrumb","info","name","url","category","slug","_createMdxContent","props","_components","Object","assign","blockquote","p","h1","ol","li","h2","strong","span","h3","ul","code","_provideComponents","components","dangerouslySetInnerHTML","__html","wrapper","MDXLayout","BlogPost","children","Layout","PostContent","CollapsibleTOC","PostTags","tags","isLinked","onClick","window","scrollTo","top","behavior","Comment","Head","_ref2","Seo","GatsbyMDXWrapper","GATSBY_COMPILED_MDX","isOpen","setIsOpen","useState","tocItems","setTocItems","useEffect","headings","document","querySelectorAll","items","Array","from","map","heading","index","id","text","textContent","level","parseInt","tagName","charAt","element","length","item","key","getElementById","headerOffset","offsetPosition","offsetTop","scrollToHeading","gatsby","react","utterances","github","blog","seo","bootcamp","java","study","database","sql","conccurency","redis","idx","isLast","Link","to","FontAwesomeIcon","icon","faAngleRight","containerRef","useRef","status","setStatus","el","current","innerHTML","script","createElement","src","async","crossOrigin","setAttribute","onload","onerror","appendChild","ref","tag","tagNames"],"sourceRoot":""}