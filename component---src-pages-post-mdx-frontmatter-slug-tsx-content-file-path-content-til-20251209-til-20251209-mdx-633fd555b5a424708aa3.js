"use strict";(self.webpackChunkaaxx98_blog=self.webpackChunkaaxx98_blog||[]).push([[325],{5606:function(e,n,a){var t=a(6540),s=a(7962);n.A=function(e){let{data:n}=e;return t.createElement("div",{className:"post-content-container"},t.createElement("h1",{className:"post-content-title"},n.mdx.frontmatter.title),t.createElement("p",{className:"post-content-meta"},"작성일: ",n.mdx.frontmatter.date),t.createElement("div",{className:"breadcrumb-wrap"},t.createElement(s.A,{info:[{name:"HOME",url:"/"},{name:`${n.mdx.frontmatter.category}`,url:`/categories/${n.mdx.frontmatter.category}`},{name:n.mdx.frontmatter.title,url:`/${n.mdx.frontmatter.slug}`}]})))}},6952:function(e,n,a){var t=a(6540);n.A=()=>{const{0:e,1:n}=(0,t.useState)(!1),{0:a,1:s}=(0,t.useState)([]);(0,t.useEffect)((()=>{const e=document.querySelectorAll("h1, h2, h3, h4, h5, h6"),n=Array.from(e).map(((e,n)=>(e.id||(e.id=`heading-${n}`),{id:e.id,text:e.textContent||"",level:parseInt(e.tagName.charAt(1),10),element:e})));s(n)}),[]);return 0===a.length?null:t.createElement("div",{className:"toc-container"},t.createElement("button",{className:"toc-toggle",onClick:()=>n(!e),"aria-expanded":e,"aria-controls":"toc-content"},t.createElement("span",{className:"toc-title"},"목차"),t.createElement("span",{className:"toc-arrow "+(e?"open":"")},"▼")),t.createElement("div",{id:"toc-content",className:"toc-content "+(e?"open":"")},t.createElement("nav",{className:"toc-nav"},t.createElement("ul",{className:"toc-list"},a.map((e=>t.createElement("li",{key:e.id,className:`toc-item level-${e.level} `},t.createElement("button",{className:"toc-link",onClick:()=>(e=>{const n=document.getElementById(e);if(n){const e=80,a=n.offsetTop-e;window.scrollTo({top:a,behavior:"smooth"})}})(e.id),title:e.text},e.text))))))))}},7708:function(e,n,a){a.r(n),a.d(n,{Head:function(){return d},default:function(){return g}});var t=a(8453),s=a(6540);function l(e){const n=Object.assign({blockquote:"blockquote",p:"p",h2:"h2",h3:"h3",span:"span",ul:"ul",li:"li",code:"code",strong:"strong",ol:"ol",hr:"hr",em:"em"},(0,t.RP)(),e.components);return s.createElement(s.Fragment,null,s.createElement(n.blockquote,null,"\n",s.createElement(n.p,null,"오늘은 CSRF와 CORS에 대해 브라우저 보안 모델의 관점에서 체계적으로 정리했습니다."),"\n",s.createElement(n.p,null,"이전에는 단편적인 지식만 보유하고 있었으나, 두 개념이 서로 다른 목적을 갖고 있다는 점을 명확하게 이해했습니다."),"\n",s.createElement(n.p,null,"또한 Spring Security 설정 코드를 직접 작성하며 SPA 환경에서 보안 설정이 어떤 방식으로 적용되는지 확인했습니다."),"\n"),"\n",s.createElement(n.h2,null,"CSRF(Cross-Site Request Forgery)"),"\n",s.createElement(n.h3,null,"CSRF 공격 흐름"),"\n",s.createElement(n.p,null,s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 792px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/4fb41ccc1370df0f8a6bcaf0def7b400/e1040/csrf.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 46%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA30lEQVR42qWRSQqEQAxF6/7HE1zpSsQBcZ7HdL9AibjQhv6QTSV5yU8Z+eo4DhmGQcIwlCAIpCgK2bZNnjTPs5RlKVEUSVVVsiyLvhtgRF3XCiTSNJV1XR+B4zhKHMdaD5QBCuy6TrdjWtM05yQEdN93zed5rjn7ZnV3YoD0fX8CaLINWPc8T1zXFcdxNHzfl2ma1BUwu9kJtJYRIIopIhgAlBPgIMsyHc5Q8tTiEDAnoN9c6Ty8fcZdbdsqLEkSHfIKtA6uTq5iY25sP+bvDYFxAjal19y3uf7gL7rXfwB/DsFk1tFGUgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/4fb41ccc1370df0f8a6bcaf0def7b400/f1512/csrf.webp 200w,\n/static/4fb41ccc1370df0f8a6bcaf0def7b400/f59aa/csrf.webp 400w,\n/static/4fb41ccc1370df0f8a6bcaf0def7b400/d21eb/csrf.webp 792w"\n              sizes="(max-width: 792px) 100vw, 792px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/4fb41ccc1370df0f8a6bcaf0def7b400/f8f3a/csrf.png 200w,\n/static/4fb41ccc1370df0f8a6bcaf0def7b400/6a8a8/csrf.png 400w,\n/static/4fb41ccc1370df0f8a6bcaf0def7b400/e1040/csrf.png 792w"\n            sizes="(max-width: 792px) 100vw, 792px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/4fb41ccc1370df0f8a6bcaf0def7b400/e1040/csrf.png"\n            alt="csrf"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n  </a>\n    </span>'}}),"\nCSRF는 사용자가 로그인한 상태에서 공격자가 의도하지 않은 요청을 대신 보낼 수 있게 만드는 공격 방식입니다. 브라우저가 쿠키를 자동으로 전송한다는 특성을 이용합니다. 사용자는 자신이 요청을 보냈다는 사실을 인지하지 못한 채 서버의 상태가 변경될 수 있습니다."),"\n",s.createElement(n.h3,null,"SameSite Cookie 옵션"),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/e79b776f0c1c80123bd98311f2b3b0db/f3baa/same-site-cookies.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 56.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACEUlEQVR42m1SS28SURidH+de9yauXJvozk1XjUqia3yQEHxUolYrfWhqGlJtNJRHhQYqTKFAZd485sEwcOfO8c5QBqj9kjvf3DP3O9+c71wOl8LVMhj1qvhTq4Pna6hWq6hUKtNVLiOTzaMvn4JqB/A893I5uMWN5z/MEyjnx3ibfI+P6+uIxWJIJBKIRCKIRqN49jyGo8M0YBVB6RWEnuf9B04mDgShA0VRIYoiywpkWYYkSSwrsCwToAQepaCui0UODlcEIRSipELyyVQVWrcbEPrkgiBgOBxeSJoT+aQ+zvmHDMMIQMo69lix298GnHKAmYMedEUMvweZTNDYeo1O7jt24k8g1CswrWHQlLNtm0mSg4NGb4DDNw9BTq6BjqckydQnpDdfTQ1jRH5YrEFx9TZKT1eQunsdxa9JWA6BM7LB+V39P1cUCfHEC9y7cwtn/I9QyruNz1h7GQ/ex44zHYmu4tuDVaRT+9j6ssdc74QKuJmM6lEOjx/dwMr9m8ikd0PC7Y0dbKZ20SjlUC8Vwvuwl/2JD/sFZJO/QMbO3BTfQUJIsOHrB2gJPGxzcCGRoMvm0tc0TJicCSuc2WCxURm6AdfUA6ddl05nOHcJzFUFzWYb9mi05LqqdSFI8hJm6Ca7+HWcCxKTunBtxNYxZqt9mkezlsXfxu8Q65wVGV5Amy9AaJaW8BafD/BFjn/GjCx9rKn1pAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/e79b776f0c1c80123bd98311f2b3b0db/f1512/same-site-cookies.webp 200w,\n/static/e79b776f0c1c80123bd98311f2b3b0db/f59aa/same-site-cookies.webp 400w,\n/static/e79b776f0c1c80123bd98311f2b3b0db/47a22/same-site-cookies.webp 800w,\n/static/e79b776f0c1c80123bd98311f2b3b0db/5bb53/same-site-cookies.webp 1200w,\n/static/e79b776f0c1c80123bd98311f2b3b0db/e2782/same-site-cookies.webp 1280w"\n              sizes="(max-width: 800px) 100vw, 800px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/e79b776f0c1c80123bd98311f2b3b0db/f8f3a/same-site-cookies.png 200w,\n/static/e79b776f0c1c80123bd98311f2b3b0db/6a8a8/same-site-cookies.png 400w,\n/static/e79b776f0c1c80123bd98311f2b3b0db/7842b/same-site-cookies.png 800w,\n/static/e79b776f0c1c80123bd98311f2b3b0db/5ece7/same-site-cookies.png 1200w,\n/static/e79b776f0c1c80123bd98311f2b3b0db/f3baa/same-site-cookies.png 1280w"\n            sizes="(max-width: 800px) 100vw, 800px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/e79b776f0c1c80123bd98311f2b3b0db/7842b/same-site-cookies.png"\n            alt="same site option"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n  </a>\n    </span>'}}),"\n",s.createElement(n.p,null,"SameSite 옵션은 쿠키가 크로스 사이트 요청에 포함되는 조건을 제어합니다."),"\n",s.createElement(n.p,null,"브라우저 보안 강화 측면에서 매우 중요한 옵션입니다."),"\n",s.createElement(n.ul,null,"\n",s.createElement(n.li,null,"Strict: 외부 요청에 절대 포함되지 않습니다."),"\n",s.createElement(n.li,null,"Lax: GET 등 안전한 요청에 한해서만 제한적으로 허용됩니다."),"\n",s.createElement(n.li,null,"None: 모든 요청에서 전송할 수 있으나 HTTPS 환경이 필요합니다."),"\n"),"\n",s.createElement(n.h3,null,"Spring Security CSRF Token 설정 예시"),"\n",s.createElement(n.p,null,"CSRF Token은 서버가 임의의 난수 값을 발급하고, 클라이언트가 해당 값을 요청에 포함해 전송하는 인증 방식입니다. 쿠키와 독립된 값이므로 공격자가 예측할 수 없고, 요청이 실제 사용자로부터 발생했는지를 확인하는 데 사용됩니다."),"\n",s.createElement(n.p,null,"Spring Security에서는 다음과 같이 설정할수 있습니다."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span>\n<span class="token annotation punctuation">@EnableWebSecurity</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityConfig</span> <span class="token punctuation">{</span>\n    <span class="token annotation punctuation">@Bean</span>\n    <span class="token keyword">public</span> <span class="token class-name">SecurityFilterChain</span> <span class="token function">filterChain</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>\n        http\n            <span class="token punctuation">.</span><span class="token function">csrf</span><span class="token punctuation">(</span>csrf <span class="token operator">-></span> csrf\n                <span class="token punctuation">.</span><span class="token function">csrfTokenRepository</span><span class="token punctuation">(</span><span class="token class-name">CookieCsrfTokenRepository</span><span class="token punctuation">.</span><span class="token function">withHttpOnlyFalse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n            <span class="token punctuation">)</span>\n            <span class="token punctuation">.</span><span class="token function">authorizeHttpRequests</span><span class="token punctuation">(</span>auth <span class="token operator">-></span> auth<span class="token punctuation">.</span><span class="token function">anyRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">authenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">return</span> http<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code></pre></div>'}}),"\n",s.createElement(n.p,null,"SPA 환경에서 CSRF Token을 JavaScript에서 읽어야 하는 경우 ",s.createElement(n.code,null,"withHttpOnlyFalse()")," 설정이 필요합니다."),"\n",s.createElement(n.h2,null,"CORS(Cross-Origin Resource Sharing)"),"\n",s.createElement(n.p,null,s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/e52d37798c2f3f881aafa8b05a3fd043/5ece7/sop.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 54%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABa0lEQVR42n1RTU/CQBDl/988y8XEmHDQmHgzIYbEGEEUNUK0LSit0G1L2+3HLvtZnFKpSAjvsNmZnfdm5m1jtUZRlGeSUmOMXA/nhL0MbcNEcxTPEe72x/3BV4RJUdVt0NiQy2yaLVuXvZPW7X3fuuuZrYvu0fF1uzM6v3ponnWap504JnXxH3kvoEhrXYdCSq33dd4m1NDFf6xWoCWl4IxJKXfHPgwpZBDGn98eCsIsS5XSJRl4oCRFiUqIc04IyfMcLrWuENxdRJaDZl5ACYEpGuusQDHGjHsYw5ZACIIgSRLf9zHGaZqCMmd8NkUTY2pPbehTKZbkJed2GEZCzmMshFRK7bgAZxRFvZvnp/b7aGDUyZLs+55pmpZl2Y4DWUopNGeMVWNDqLQiOXl7NF67xuRjuk0ukL8Yjm3b9dXaQ3iARYAJM8PmlRFgz6cbmo6PM1LZ9NuZMhGlNKP8gOfww0suGBdq6+d/ABe+dm9GP8vjAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/e52d37798c2f3f881aafa8b05a3fd043/f1512/sop.webp 200w,\n/static/e52d37798c2f3f881aafa8b05a3fd043/f59aa/sop.webp 400w,\n/static/e52d37798c2f3f881aafa8b05a3fd043/47a22/sop.webp 800w,\n/static/e52d37798c2f3f881aafa8b05a3fd043/5bb53/sop.webp 1200w"\n              sizes="(max-width: 800px) 100vw, 800px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/e52d37798c2f3f881aafa8b05a3fd043/f8f3a/sop.png 200w,\n/static/e52d37798c2f3f881aafa8b05a3fd043/6a8a8/sop.png 400w,\n/static/e52d37798c2f3f881aafa8b05a3fd043/7842b/sop.png 800w,\n/static/e52d37798c2f3f881aafa8b05a3fd043/5ece7/sop.png 1200w"\n            sizes="(max-width: 800px) 100vw, 800px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/e52d37798c2f3f881aafa8b05a3fd043/7842b/sop.png"\n            alt="Same-Origin Policy"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n  </a>\n    </span>'}}),"\nCORS는 브라우저가 Same-Origin Policy(SOP)를 적용했기 때문에 생겨난 제약을 완화하는 규칙이었습니다. 서버가 명시적으로 허용한 경우에만 브라우저는 응답을 스크립트에서 접근할 수 있었습니다."),"\n",s.createElement(n.h3,null,"CORS 요청 및 Preflight 흐름"),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/8eabbd712a15d557f06a0b1c7aca68a0/b04cd/options.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 33.5%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA0ElEQVR42pXQywqCQBQG4Hn2Fi3atO01ahXRQohIqBAyxUwMu6jkbXTUasbRjq00gupbHjj/nH9Q1VC2VZ80pyiMahhHnPPqT2g6GQvCbCGugxfbtv0gcFzX831K6aPhfn9wRi9hulJ2t1teL4uadzxr2JPMg6XruqIo8lZWVRVSnDaYRGGw3O47/QEcWy/3Rpf1ZijPu1cvJinBMYYOcZJkWZa2EUIwxnDUStokCWGMoZNlGoZpHR048lvHEiIgFBrAM3meI8pqRcHLH7x9+BMpdY3mdFkn4wAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/8eabbd712a15d557f06a0b1c7aca68a0/f1512/options.webp 200w,\n/static/8eabbd712a15d557f06a0b1c7aca68a0/f59aa/options.webp 400w,\n/static/8eabbd712a15d557f06a0b1c7aca68a0/47a22/options.webp 800w,\n/static/8eabbd712a15d557f06a0b1c7aca68a0/eeb80/options.webp 950w"\n              sizes="(max-width: 800px) 100vw, 800px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/8eabbd712a15d557f06a0b1c7aca68a0/f8f3a/options.png 200w,\n/static/8eabbd712a15d557f06a0b1c7aca68a0/6a8a8/options.png 400w,\n/static/8eabbd712a15d557f06a0b1c7aca68a0/7842b/options.png 800w,\n/static/8eabbd712a15d557f06a0b1c7aca68a0/b04cd/options.png 950w"\n            sizes="(max-width: 800px) 100vw, 800px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/8eabbd712a15d557f06a0b1c7aca68a0/7842b/options.png"\n            alt="Options"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n  </a>\n    </span>'}}),"\n",s.createElement(n.p,null,"Preflight 요청은 브라우저가 서버에 “이 요청을 보내도 되는지” 사전에 확인하기 위해 OPTIONS 메서드로 보내는 검사 요청입니다.\n서버는 ",s.createElement(n.code,null,"Access-Control-Allow-*")," 형태의 헤더로 허용 범위를 명시합니다."),"\n",s.createElement(n.h3,null,"Spring CORS 기본 설정 예시"),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>\n    <span class="token annotation punctuation">@Override</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addCorsMappings</span><span class="token punctuation">(</span><span class="token class-name">CorsRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        registry<span class="token punctuation">.</span><span class="token function">addMapping</span><span class="token punctuation">(</span><span class="token string">"/api/**"</span><span class="token punctuation">)</span>\n            <span class="token punctuation">.</span><span class="token function">allowedOrigins</span><span class="token punctuation">(</span><span class="token string">"https://frontend.example.com"</span><span class="token punctuation">)</span>\n            <span class="token punctuation">.</span><span class="token function">allowedMethods</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span><span class="token string">"POST"</span><span class="token punctuation">,</span><span class="token string">"PUT"</span><span class="token punctuation">,</span><span class="token string">"DELETE"</span><span class="token punctuation">)</span>\n            <span class="token punctuation">.</span><span class="token function">allowedHeaders</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span>\n            <span class="token punctuation">.</span><span class="token function">allowCredentials</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>\n            <span class="token punctuation">.</span><span class="token function">maxAge</span><span class="token punctuation">(</span><span class="token number">3600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code></pre></div>'}}),"\n",s.createElement(n.h3,null,"프록시 서버"),"\n",s.createElement(n.p,null,"브라우저 환경에서 발생하는 CORS 문제를 구조적으로 제거하기 위해 가장 많이 사용하는 방식이 바로 프록시 서버입니다. 아래 그림은 그 흐름을 시각적으로 보여줍니다."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/644d605ff4528e69892397424af1fc6f/ecd9d/proxy-server.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 41%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABqUlEQVR42h2PSW+bQBiG+f+3Xirl1B6iKjlUrZpYdZO0aRtViY1ttsGMYdgx9gADYTEDZuu00qvv8EnPu3C27pnQrrO6q7q2aNmtSEUOaRwS7OMCZxUpx2YY6TD917lsQ+ewt8MkJBwA8GWxktZgaqemaM/luckbZuEg93khakYky6aiWKrqAGBb5jHC1e3s/mb2bX73gyvL0g/2q4XIYJpTFs401IOL3KWgCbtER3irY2hgzcDITh0v+/j59uvdw/z+O3d9/end+w+GiqZuGk4dq9eVzGbwTE8GO2QlIvAl4MtqsJFdVdv/kQ68AKZpqGvKHXH05u3Fw+MyxicLhSYKM0LrcjR0T5ChbhHbIYYZYVwXxViWk2FnynY3MXocuS8388vLq9lP1Q6ojmLWzQ8rHHcQerwIV1pi2ux5dIP8gOsoObtuCraQwX3fcziKkWk9PgmmmwuKv5a9teQIavh740gy3O6wCAIB+BvZW4pOeKQbmAqK9i95GDkIjdVa5JeAVlOa0Iw0rwnNs15RPZ6XSFQXWcuGvJImS+gp7x0v//X0ggxL0/S/6GynDo7gt24AAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/644d605ff4528e69892397424af1fc6f/f1512/proxy-server.webp 200w,\n/static/644d605ff4528e69892397424af1fc6f/f59aa/proxy-server.webp 400w,\n/static/644d605ff4528e69892397424af1fc6f/47a22/proxy-server.webp 800w,\n/static/644d605ff4528e69892397424af1fc6f/5bb53/proxy-server.webp 1200w,\n/static/644d605ff4528e69892397424af1fc6f/485a2/proxy-server.webp 1600w,\n/static/644d605ff4528e69892397424af1fc6f/3a2fb/proxy-server.webp 2001w"\n              sizes="(max-width: 800px) 100vw, 800px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/644d605ff4528e69892397424af1fc6f/f8f3a/proxy-server.png 200w,\n/static/644d605ff4528e69892397424af1fc6f/6a8a8/proxy-server.png 400w,\n/static/644d605ff4528e69892397424af1fc6f/7842b/proxy-server.png 800w,\n/static/644d605ff4528e69892397424af1fc6f/5ece7/proxy-server.png 1200w,\n/static/644d605ff4528e69892397424af1fc6f/0d4f8/proxy-server.png 1600w,\n/static/644d605ff4528e69892397424af1fc6f/ecd9d/proxy-server.png 2001w"\n            sizes="(max-width: 800px) 100vw, 800px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/644d605ff4528e69892397424af1fc6f/7842b/proxy-server.png"\n            alt="프록시 서버"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n  </a>\n    </span>'}}),"\n",s.createElement(n.p,null,"CORS는 “브라우저”가 외부 리소스를 막는 정책이기 때문에 서버 대 서버 요청은 아예 CORS 문제 자체가 발생하지 않습니다."),"\n",s.createElement(n.p,null,"이 원리를 활용해 프록시 서버를 두면 CORS 문제를 구조적으로 해결할 수 있습니다."),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"프록시 서버 동작 원리")),"\n",s.createElement(n.ol,null,"\n",s.createElement(n.li,null,"\n",s.createElement(n.p,null,"브라우저는 프론트엔드 서버(동일 Origin)로 요청을 보냅니다."),"\n"),"\n",s.createElement(n.li,null,"\n",s.createElement(n.p,null,"프론트엔드 서버(또는 API Gateway)가 백엔드 서버로 요청을 전달합니다."),"\n"),"\n",s.createElement(n.li,null,"\n",s.createElement(n.p,null,"서버 → 서버 요청은 CORS가 적용되지 않습니다."),"\n"),"\n",s.createElement(n.li,null,"\n",s.createElement(n.p,null,"프록시 서버가 결과를 브라우저에게 전달합니다."),"\n"),"\n"),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"왜 프록시 서버는 CORS를 해결할까?")),"\n",s.createElement(n.p,null,"CORS는 오직 브라우저의 스크립트 요청에만 적용됩니다."),"\n",s.createElement(n.p,null,"서버 간 요청은 CORS 차단 대상이 아닙니다."),"\n",s.createElement(n.p,null,"따라서 브라우저와 백엔드 사이의 “중간 서버”만 동일 Origin이면 문제 해결입니다."),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"프록시 방식의 장점")),"\n",s.createElement(n.ul,null,"\n",s.createElement(n.li,null,"\n",s.createElement(n.p,null,"백엔드 서버에서 CORS 설정을 굳이 복잡하게 하지 않아도 된다."),"\n"),"\n",s.createElement(n.li,null,"\n",s.createElement(n.p,null,"배포 환경에서 API Gateway로 확장하기 좋다."),"\n"),"\n",s.createElement(n.li,null,"\n",s.createElement(n.p,null,"보안 설정을 서버 측에서 일관성 있게 관리할 수 있다."),"\n"),"\n"),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/f5936c70f6749278ee9e0a0f1ec1db0b/4af54/vite.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 66.5%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAACMUlEQVR42n1Sa2/SYBTuTzXRxA/GmLgPGmM02RdjzJIli37Q6bJlalQiRTcYlzlwMDqQ2waUcinl1stbKDCghUL7elou8snkSXP6nnOe877neQhTlf4DbMOKRwvgVaBKBCSMkWiORMMGBPM2Y7g6+UcEv7NlgTlvxmMZT9ormBqyDvWOhWkHsvZkm2iMsC4bFovdjFWkdhs9sdKX2DmmA2E2FFtstt0qCrV8H1Vh+Gwg4oksCWypTJsaDEdARwxkjnR+i0VD0fBZLBr8FfBEzgN4ggQul/4Tpq8uO60iTMNjpEjclif5+EfWGUlpvSY8ngB6F+lAjUKVScG0fIbynRz1uhLDZA8/ffT73IOukK9wgtjc/e6583z70cvXt18dkpEk1kRCEVmP24WaTK2UEes0V0yfnnmRIv888b55+273w/tmoxKnWV7kz0Ont+7ev/dg49mLrXypiOHapXxie2fHfewinQ6SdHz5+nn/YM9QhemQpyJBlsnAEwxNwnhA55IbTzcfPtncO9jHRhcWQdy0uTgVCvjdPu/R76DP7zvOpilYGKwEzxRTb8OS9T4v1ZlG5ToRC19eBAvXcbipfsMTeKooqMoyqWoxw9foCp3oyVWQxxjCzi2AvONeI5eh4EVQVi4k6+UruC8cEpZ6GsKTjgkAwfWOoSJwiOWW4RIr2cEFNiC2dR5ZihtLh8Eow642596aew5SYDgrJdiBaLODw9YsuahWVz3Sev8a3eL7F/Xws3ijPMtHAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/f5936c70f6749278ee9e0a0f1ec1db0b/f1512/vite.webp 200w,\n/static/f5936c70f6749278ee9e0a0f1ec1db0b/f59aa/vite.webp 400w,\n/static/f5936c70f6749278ee9e0a0f1ec1db0b/47a22/vite.webp 800w,\n/static/f5936c70f6749278ee9e0a0f1ec1db0b/5bb53/vite.webp 1200w,\n/static/f5936c70f6749278ee9e0a0f1ec1db0b/aa619/vite.webp 1400w"\n              sizes="(max-width: 800px) 100vw, 800px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/f5936c70f6749278ee9e0a0f1ec1db0b/f8f3a/vite.png 200w,\n/static/f5936c70f6749278ee9e0a0f1ec1db0b/6a8a8/vite.png 400w,\n/static/f5936c70f6749278ee9e0a0f1ec1db0b/7842b/vite.png 800w,\n/static/f5936c70f6749278ee9e0a0f1ec1db0b/5ece7/vite.png 1200w,\n/static/f5936c70f6749278ee9e0a0f1ec1db0b/4af54/vite.png 1400w"\n            sizes="(max-width: 800px) 100vw, 800px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/f5936c70f6749278ee9e0a0f1ec1db0b/7842b/vite.png"\n            alt="vite proxy"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n  </a>\n    </span>'}}),"\n",s.createElement(n.p,null,"vite를 이용하여 프론트엔드 코드를 작성했을 때 다음과 같이 프록시 서버 설정을 할 수 있었습니다."),"\n",s.createElement(n.p,null,s.createElement(n.code,null,"localhost:5713"),"과 ",s.createElement(n.code,null,"localhost:8080"),"간의 통신이 원활히 진행됩니다."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/40ceb00bfbf744ebd6a13198d8f451e3/f7d5c/proxy.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 60.5%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAB8UlEQVR42n2S626jMBCF8/6PtlK27TbpJiUJOBiM8YVgfIG02rOTNEJt1fbHxwwIH805nkVKAbXssT1YNMqBNz2eqc9FgBENxPIX6vs7iD8PaB7ukN+v0XYGKUZ47xFC+MDi8uhOFseDRLlrwXOFutKo/m5QPm6RZxW6poYzFk4r2EaiHxziJ6FZ0PtLoyGZAHsSaEqFTks4JXAyHeyJpogBcRwRU0K61BC/FHubkAR9MNBWgu8lZKHRVIbsnzBNE2J8f8DfbL7h5/dPlr3XsENLdnocS4aszEiQvjmLFBLGOFFm6cqYRmKaOY8v1+8fBIeLoG/huwBOVvf7PWomoSl8YThYe4DsGlS3nskDjjJH3uywYnRhqppjmAU7rygzB9F24FuJfMXRHBWKgmG9ewSrM+x2S+z5E0pVkFiGA7Hhj2hNM0dxFQzeoiecCZBqAN8o7H/XqDKN41pBlw7WGHD2jEowGGtxjq84p1e8pH+Y4pmima6QYCS7JUR4hjQMhdmBk6WCZ+AXezSZ6HJUjibqVti0S+R6hXZgUOF4Rcdyhm45wQYScmtk9QZVv4VK9PNYUC2utU05VCzoAINOJEK0Mf+ShSfLMXRoafcqYTGly+i0a36cawy3/h3pG26LbWAaDndycP2AwTl44rvl/Yn/vU6KvWbraywAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/40ceb00bfbf744ebd6a13198d8f451e3/f1512/proxy.webp 200w,\n/static/40ceb00bfbf744ebd6a13198d8f451e3/f59aa/proxy.webp 400w,\n/static/40ceb00bfbf744ebd6a13198d8f451e3/47a22/proxy.webp 800w,\n/static/40ceb00bfbf744ebd6a13198d8f451e3/d7ee4/proxy.webp 830w"\n              sizes="(max-width: 800px) 100vw, 800px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/40ceb00bfbf744ebd6a13198d8f451e3/f8f3a/proxy.png 200w,\n/static/40ceb00bfbf744ebd6a13198d8f451e3/6a8a8/proxy.png 400w,\n/static/40ceb00bfbf744ebd6a13198d8f451e3/7842b/proxy.png 800w,\n/static/40ceb00bfbf744ebd6a13198d8f451e3/f7d5c/proxy.png 830w"\n            sizes="(max-width: 800px) 100vw, 800px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/40ceb00bfbf744ebd6a13198d8f451e3/7842b/proxy.png"\n            alt="프록시 서버"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n  </a>\n    </span>'}}),"\n",s.createElement(n.h2,null,"정리"),"\n",s.createElement(n.p,null,"개발을 하면서 CSRF와 CORS라는 용어는 자주 접했지만, 각각이 어떤 문제를 해결하기 위한 기술인지, 어떤 환경에서 발생하며 어떤 위험을 초래하는지에 대해서는 명확히 이해하지 못하고 있었습니다. 이번 TIL을 통해 두 개념을 구조적으로 비교하며 정리하면서 그 차이를 확실하게 이해할 수 있었습니다."),"\n",s.createElement(n.hr),"\n",s.createElement(n.h3,null,s.createElement(n.strong,null,"CSRF (Cross-Site Request Forgery)")),"\n",s.createElement(n.p,null,"사용자가 ",s.createElement(n.em,null,"의도하지 않은 요청을 자동으로 보내게 만드는 공격 기법")),"\n",s.createElement(n.ul,null,"\n",s.createElement(n.li,null,s.createElement(n.strong,null,"발생 배경"),"\n",s.createElement(n.ul,null,"\n",s.createElement(n.li,null,"브라우저가 ",s.createElement(n.em,null,"쿠키를 자동으로 전송"),"하는 특성을 악용"),"\n",s.createElement(n.li,null,"공격자가 별도의 인증 없이 사용자 권한으로 요청 실행 가능"),"\n"),"\n"),"\n",s.createElement(n.li,null,s.createElement(n.strong,null,"문제점"),"\n",s.createElement(n.ul,null,"\n",s.createElement(n.li,null,"로그인된 사용자의 권한으로 서버의 데이터가 수정될 수 있음"),"\n",s.createElement(n.li,null,"사용자는 요청이 발생했다는 사실조차 모름"),"\n"),"\n"),"\n",s.createElement(n.li,null,s.createElement(n.strong,null,"방어 방법"),"\n",s.createElement(n.ul,null,"\n",s.createElement(n.li,null,"서버가 CSRF Token을 발급 → 요청마다 검증"),"\n",s.createElement(n.li,null,"SameSite Cookie 옵션(Lax/Strict) 적용"),"\n",s.createElement(n.li,null,"중요한 상태 변경 요청은 Token 또는 Origin 검사 수행"),"\n"),"\n"),"\n"),"\n",s.createElement(n.h3,null,s.createElement(n.strong,null,"CORS (Cross-Origin Resource Sharing)")),"\n",s.createElement(n.p,null,"브라우저가 ",s.createElement(n.em,null,"다른 Origin의 응답 접근을 제한하는 정책을 완화하기 위한 메커니즘")),"\n",s.createElement(n.ul,null,"\n",s.createElement(n.li,null,s.createElement(n.strong,null,"발생 배경"),"\n",s.createElement(n.ul,null,"\n",s.createElement(n.li,null,"브라우저는 보안 때문에 Same-Origin Policy(SOP)를 기본 적용"),"\n",s.createElement(n.li,null,"서로 다른 Origin 간에 API 요청은 되지만 ",s.createElement(n.strong,null,"응답 접근은 차단")),"\n"),"\n"),"\n",s.createElement(n.li,null,s.createElement(n.strong,null,"문제점"),"\n",s.createElement(n.ul,null,"\n",s.createElement(n.li,null,"프론트엔드와 백엔드가 서로 다른 도메인·포트에서 동작하면 브라우저가 응답 사용을 차단"),"\n",s.createElement(n.li,null,"개발·배포 환경에서 흔히 발생하는 이슈"),"\n"),"\n"),"\n",s.createElement(n.li,null,s.createElement(n.strong,null,"해결 방법"),"\n",s.createElement(n.ul,null,"\n",s.createElement(n.li,null,"서버에서 ",s.createElement(n.code,null,"Access-Control-Allow-Origin"),", ",s.createElement(n.code,null,"Allow-Methods"),", ",s.createElement(n.code,null,"Allow-Headers")," 등 설정"),"\n",s.createElement(n.li,null,"Preflight(OPTIONS) 요청을 허용하도록 구성"),"\n",s.createElement(n.li,null,"또는 프록시 서버(개발 서버, API Gateway 등)를 사용해 동일 Origin으로 요청을 우회"),"\n"),"\n"),"\n"))}var c=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,t.RP)(),e.components);return n?s.createElement(n,e,s.createElement(l,e)):l(e)},i=a(7082),p=a(8009),o=a(5606),r=a(8454),u=a(1042),m=a(6952);function b(e){let{data:n,children:a}=e;return s.createElement(i.A,null,s.createElement(o.A,{data:n}),s.createElement("section",{className:"post-body-container"},s.createElement(m.A,null),s.createElement("div",{className:"post-body"},a),s.createElement("div",{className:"post-tags-area"},s.createElement(r.A,{tags:n.mdx.frontmatter.tags,isLinked:!0})),s.createElement("div",{className:"post-top-wrap"},s.createElement("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"post-top-button","aria-label":"맨 위로 이동"},"↑ TOP"))),s.createElement("section",{className:"comment-section"},s.createElement(p.A,null)))}function d(e){let{data:n}=e;return s.createElement(u.A,{title:n.mdx.frontmatter.title})}function g(e){return s.createElement(b,e,s.createElement(c,e))}},7717:function(e,n){n.A={gatsby:"Gatsby",react:"React",utterances:"Utterances",github:"Github",blog:"블로그",seo:"SEO","tailwind-css":"Tailwind CSS",bootcamp:"부트캠프후기","multi-campus":"멀티캠퍼스IT부트캠프","ureca-backend":"LG U+ 유레카 3기 백엔드",java:"JAVA",study:"스터디",database:"데이터베이스",sql:"SQL",conccurency:"동시성",redis:"Redis"}},7962:function(e,n,a){a.d(n,{A:function(){return i}});var t=a(6540),s=a(6188),l=a(2337),c=a(4794);function i(e){let{info:n}=e;return n&&0!==n.length?t.createElement("nav",{"aria-label":"breadcrumb",className:"breadcrumb"},t.createElement("ol",{className:"breadcrumb-list"},n.map(((e,a)=>{const i=a===n.length-1;return t.createElement("li",{key:e.url||`${e.name}-${a}`,className:"breadcrumb-item"},i?t.createElement("span",{"aria-current":"page",className:"breadcrumb-current"},e.name):t.createElement(c.Link,{to:e.url,className:"breadcrumb-link"},e.name),!i&&t.createElement("span",{className:"breadcrumb-sep"},t.createElement(l.g,{icon:s.vmR,className:"breadcrumb-sep-icon"})))})))):null}},8009:function(e,n,a){var t=a(6540);n.A=function(){const e=(0,t.useRef)(null),{0:n,1:a}=(0,t.useState)("pending");return(0,t.useEffect)((()=>{const n=e.current;if(!n)return;n.innerHTML="";const t=document.createElement("script");return t.src="https://utteranc.es/client.js",t.async=!0,t.crossOrigin="anonymous",t.setAttribute("repo","aaxx98/aaxx98.github.io"),t.setAttribute("issue-term","pathname"),t.setAttribute("theme","github-dark"),t.onload=()=>a("success"),t.onerror=()=>a("failed"),n.appendChild(t),()=>{n.innerHTML=""}}),[]),t.createElement("section",{className:"comment-container","aria-label":"댓글"},"failed"===n&&t.createElement("div",{className:"comment-status error"},"댓글을 불러오는 중 오류가 발생했습니다. 새로고침 후 다시 시도해주세요."),"pending"===n&&t.createElement("div",{className:"comment-status pending"},"댓글을 불러오는 중..."),t.createElement("div",{ref:e,className:"utterances-container"}))}},8454:function(e,n,a){var t=a(6540),s=a(4794),l=a(7717);n.A=function(e){let{tags:n,isLinked:a=!1}=e;return t.createElement("div",{className:"post-tags"},n.map((e=>a?t.createElement(s.Link,{key:e,to:`/tags/${e}`,className:"post-tag"},"#",l.A[e]||e):t.createElement("div",{key:e,className:"post-tag"},"#",l.A[e]||e))))}}}]);
//# sourceMappingURL=component---src-pages-post-mdx-frontmatter-slug-tsx-content-file-path-content-til-20251209-til-20251209-mdx-633fd555b5a424708aa3.js.map