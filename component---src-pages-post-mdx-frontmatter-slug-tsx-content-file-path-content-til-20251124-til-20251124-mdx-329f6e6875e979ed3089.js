"use strict";(self.webpackChunkaaxx98_blog=self.webpackChunkaaxx98_blog||[]).push([[101],{5360:function(n,a,s){s.r(a),s.d(a,{Head:function(){return g},default:function(){return d}});var t=s(8453),e=s(6540);function p(n){const a=Object.assign({blockquote:"blockquote",p:"p",strong:"strong",a:"a",h1:"h1",span:"span",code:"code",ul:"ul",li:"li",h2:"h2",hr:"hr",h3:"h3",ol:"ol"},(0,t.RP)(),n.components);return e.createElement(e.Fragment,null,e.createElement(a.blockquote,null,"\n",e.createElement(a.p,null,"이번 주에는 저번에 작성했던 ",e.createElement(a.strong,null,"세션 기반 로그인 방식"),"을 개선하여, ",e.createElement(a.strong,null,"JWT 기반 인증 방식"),"으로 전환해보았습니다."),"\n",e.createElement(a.p,null,"추가로 Spring Security를 이용하여 API 요청 단위로 사용자 인증 정보를 검증하도록 변경하였습니다."),"\n",e.createElement(a.p,null,"또한 비밀번호를 암호화하여 안전하게 저장할 수 있도록 ",e.createElement(a.strong,null,"Bcrypt 해싱"),"을 적용하고, 로그인 시 입력한 비밀번호를 복호화 없이 비교할 수 있도록 검증하는 로직도 추가했습니다."),"\n"),"\n",e.createElement(a.p,null,"전체 코드는 ",e.createElement(a.a,{href:"https://github.com/aaxx98/java-study/tree/main/Spring/CafeWeb"},"Github repo"),"에서 확인할 수 있습니다."),"\n",e.createElement(a.h1,null,"1. 기존 세션 기반 로그인의 문제점"),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java">  <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span>\n  <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">LoginRequest</span> loginRequest<span class="token punctuation">,</span>\n      <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>\n\n      <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 없으면 새로 생성</span>\n      session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"userDto"</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 세션에 user 정보 저장</span>\n      <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> <span class="token string">"로그인 성공"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n      <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>\n  <span class="token punctuation">}</span></code></pre></div>'}}),"\n",e.createElement(a.p,null,"세션 기반 인증은 ",e.createElement(a.code,null,"HttpSession"),"을 통해 세션에 사용자 정보를 저장하여 간단하게 구현할 수 있었지만 다음과 같은 문제점이 있습니다."),"\n",e.createElement(a.ul,null,"\n",e.createElement(a.li,null,"\n",e.createElement(a.p,null,e.createElement(a.strong,null,"서버 메모리 의존성")),"\n",e.createElement(a.ul,null,"\n",e.createElement(a.li,null,"세션 정보가 서버 메모리에 저장되기 때문에 서버 재시작 시 모든 세션이 초기화됩니다."),"\n",e.createElement(a.li,null,"세션 ID가 탈취될 경우 서버의 세션 저장소에 접근할 수 있어 사용자 정보 유출 가능성이 존재합니다.","\n",e.createElement(a.ul,null,"\n",e.createElement(a.li,null,"같은 세션 ID를 통해 다른 정보를 관리하는 경우 로그인 정보 뿐만 아니라 다른 데이터도 유출될 수 있습니다."),"\n",e.createElement(a.li,null,"예: 장바구니 정보를 세션에 저장하고 있을 때 - ",e.createElement(a.code,null,'session.setAttribute("cart", updatedCart);')),"\n"),"\n"),"\n",e.createElement(a.li,null,"로그인 사용자가 많아질수록 서버가 관리해야 하는 세션 수가 증가하여 메모리 사용량이 늘어나고 부하가 커집니다."),"\n"),"\n"),"\n",e.createElement(a.li,null,"\n",e.createElement(a.h2,null,e.createElement(a.strong,null,"세션 기반은 Stateful하기 때문에 무상태 API 설계에 부적합")),"\n",e.createElement(a.ul,null,"\n",e.createElement(a.li,null,"서버가 각 클라이언트의 상태(Session)를 보관해야 하므로 요청마다 동일 서버에 도달해야 합니다."),"\n",e.createElement(a.li,null,"서버 확장(스케일 아웃) 시 세션을 공유하기 위해 Redis 같은 외부 저장소 도입이 필요해 구조가 복잡해집니다."),"\n",e.createElement(a.li,null,"MSA나 모바일/SPA 기반 환경에서 선호되는 Stateless API 방식과 잘 맞지 않습니다."),"\n"),"\n"),"\n"),"\n",e.createElement(a.p,null,"추가로, 현재 비밀번호를 그대로 저장하고 평문으로 비교하고 있기 때문에 회원가입 시 비밀번호를 암호화하여 저장해야합니다."),"\n",e.createElement(a.h1,null,"2. 개선 방향"),"\n",e.createElement(a.h2,null,"JWT 기반 인증 방식"),"\n",e.createElement(a.ul,null,"\n",e.createElement(a.li,null,"JWT(Json Web Token)는 사용자 인증 정보를 자체적으로 포함하는 토큰이며, 서버는 별도의 세션 상태를 저장하지 않는 Stateless 구조로 요청을 처리합니다."),"\n",e.createElement(a.li,null,"토큰에는 사용자 식별자, 권한, 만료 시간 등의 정보가 포함되며, 서버는 서명(Signature)을 검증하여 위조 여부를 판단합니다."),"\n",e.createElement(a.li,null,"로그인 후 발급된 JWT는 HttpOnly 쿠키에 저장되어 브라우저의 스크립트 접근을 차단하고, 이후 모든 요청마다 자동으로 쿠키를 통해 인증 검증이 수행됩니다."),"\n"),"\n",e.createElement(a.p,null,e.createElement(a.strong,null,"개선점")),"\n",e.createElement(a.ul,null,"\n",e.createElement(a.li,null,"서버가 세션 상태를 보관하지 않아 메모리 사용량이 감소합니다."),"\n",e.createElement(a.li,null,"서버 확장 시 세션 공유를 고려하지 않아도 되어 구조가 단순해집니다."),"\n",e.createElement(a.li,null,"토큰 만료 시간을 명시적으로 관리할 수 있어 인증 수명 제어가 용이합니다."),"\n",e.createElement(a.li,null,"서버 내부의 세션 저장소가 없기 때문에 세션 하이재킹으로 인한 2차 피해가 없습니다."),"\n"),"\n",e.createElement(a.hr),"\n",e.createElement(a.h2,null,"Spring Security 기반의 인증 처리"),"\n",e.createElement(a.ul,null,"\n",e.createElement(a.li,null,e.createElement(a.code,null,"Security Filter Chain")," 단계에서 JWT를 검증하여 컨트롤러에 진입하기 전에 요청을 차단할 수 있습니다."),"\n",e.createElement(a.li,null,"커스텀 필터(JwtFilter)를 통해 쿠키에서 토큰을 추출하고 검증한 뒤, 정상적인 토큰일 경우 ",e.createElement(a.code,null,"SecurityContext"),"에 인증 정보를 등록합니다."),"\n",e.createElement(a.li,null,"API별 접근 제어를 설정 파일(",e.createElement(a.code,null,"SecurityConfig"),")에서 선언적으로 구성할 수 있어 인증 및 인가 관리가 체계적입니다."),"\n"),"\n",e.createElement(a.p,null,e.createElement(a.strong,null,"개선점")),"\n",e.createElement(a.ul,null,"\n",e.createElement(a.li,null,"인증 처리가 ",e.createElement(a.code,null,"Interceptor"),"보다 더 이른 단계에서 일관적으로 수행됩니다."),"\n",e.createElement(a.li,null,"보안 관련 기능(CORS, CSRF, 권한, 인증 실패 처리 등)을 Spring Security 표준 방식으로 구성할 수 있습니다."),"\n",e.createElement(a.li,null,"비즈니스 로직과 인증 로직이 분리되어 유지보수성이 향상됩니다."),"\n"),"\n",e.createElement(a.hr),"\n",e.createElement(a.h2,null,"비밀번호 암호화(Bcrypt)"),"\n",e.createElement(a.ul,null,"\n",e.createElement(a.li,null,"사용자 비밀번호를 Spring Security의 ",e.createElement(a.code,null,"BCryptPasswordEncoder"),"로 해시하여 저장합니다."),"\n",e.createElement(a.li,null,"Bcrypt는 단방향 해시 방식이기 때문에 저장된 값은 복호화가 불가능하며, 비밀번호 비교는 ",e.createElement(a.code,null,"matches()")," 메서드를 통해 안전하게 이루어집니다."),"\n",e.createElement(a.li,null,"평문 저장 또는 단순 문자열 비교 방식에서 발생하는 보안 취약점을 제거할 수 있습니다."),"\n"),"\n",e.createElement(a.p,null,e.createElement(a.strong,null,"개선점")),"\n",e.createElement(a.ul,null,"\n",e.createElement(a.li,null,"비밀번호 유출 시 원본 비밀번호가 보호됩니다."),"\n",e.createElement(a.li,null,"기본적인 회원 인증 보안 수준이 강화됩니다."),"\n"),"\n",e.createElement(a.h1,null,"3. 개선 작업"),"\n",e.createElement(a.h2,null,"의존성 추가"),"\n",e.createElement(a.p,null,e.createElement(a.code,null,"pom.xml"),"에 Spring Security와 Java에서 JWT를 다룰수 있도록 하는 라이브러리인 JJWT 관련 의존성을 추가합니다."),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="xml"><pre class="language-xml"><code class="language-xml">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-security<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>\n\n    <span class="token comment">&lt;!-- JJWT --\x3e</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>io.jsonwebtoken<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jjwt-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>0.12.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>io.jsonwebtoken<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jjwt-impl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>0.12.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>io.jsonwebtoken<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jjwt-jackson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>0.12.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre></div>'}}),"\n",e.createElement(a.h2,null,"회원가입 시 비밀번호 암호화(Bcrypt)"),"\n",e.createElement(a.h3,null,"PasswordEncoder Bean 등록"),"\n",e.createElement(a.p,null,"Spring Security와 관련된 설정은 ",e.createElement(a.code,null,"SecurityConfig"),"에서 관리합니다."),"\n",e.createElement(a.p,null,"Spring Security에서 제공하는 ",e.createElement(a.code,null,"BCryptPasswordEncoder"),"를 Bean으로 등록합니다."),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityConfig</span> <span class="token punctuation">{</span>\n\n  <span class="token annotation punctuation">@Bean</span>\n  <span class="token keyword">public</span> <span class="token class-name">PasswordEncoder</span> <span class="token function">passwordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BCryptPasswordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code></pre></div>'}}),"\n",e.createElement(a.h3,null,"회원가입 시 암호화 된 비밀번호 저장"),"\n",e.createElement(a.p,null,"회원가입에 사용되는 UserService 코드의 일부입니다. request로 받은 비밀번호를 암호화하여 저장합니다."),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java">  <span class="token keyword">public</span> <span class="token class-name">ResponseRegisterDto</span> <span class="token function">registerUser</span><span class="token punctuation">(</span><span class="token class-name">UserDto</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token class-name">String</span> encodedPassword <span class="token operator">=</span> passwordEncoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 비밀번호 암호화</span>\n    user<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span>encodedPassword<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">int</span> inserted <span class="token operator">=</span> userDao<span class="token punctuation">.</span><span class="token function">registerUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>inserted <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span><span class="token string">"회원 등록에 실패했습니다."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token class-name">ResponseRegisterDto</span> response <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ResponseRegisterDto</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    response<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    response<span class="token punctuation">.</span><span class="token function">setEmail</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    response<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token string">"Register Success"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> response<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span></code></pre></div>'}}),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/ae5587abe0a5d30cacd060961a1d9f3c/c7227/register.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 20%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAwElEQVR42lXP226DMBBFUf7/89pIreooIRiTYooJxuFiA7smlVB5WNIZn5kHJ+9vAnFW5HmNlD+7bc5VE7uCz6+MD1FyEhXiojlfNbesIr1pZG5eOVeGTNYktTbxWNO2w4G1I6buSFMVFfFQ07Qj6ttxLx2dneid37luZBxmknUB1mg52t6nuKDTElc1NFeJkXdszLbtsY/nS1PbPQ99IAnTyuxXlsDBHE2xM5eKR/zaVGjCM7DtB//Xh3+22Xv4BUFvMPRBVscGAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/ae5587abe0a5d30cacd060961a1d9f3c/f1512/register.webp 200w,\n/static/ae5587abe0a5d30cacd060961a1d9f3c/f59aa/register.webp 400w,\n/static/ae5587abe0a5d30cacd060961a1d9f3c/47a22/register.webp 800w,\n/static/ae5587abe0a5d30cacd060961a1d9f3c/5bb53/register.webp 1200w,\n/static/ae5587abe0a5d30cacd060961a1d9f3c/c5825/register.webp 1382w"\n              sizes="(max-width: 800px) 100vw, 800px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/ae5587abe0a5d30cacd060961a1d9f3c/f8f3a/register.png 200w,\n/static/ae5587abe0a5d30cacd060961a1d9f3c/6a8a8/register.png 400w,\n/static/ae5587abe0a5d30cacd060961a1d9f3c/7842b/register.png 800w,\n/static/ae5587abe0a5d30cacd060961a1d9f3c/5ece7/register.png 1200w,\n/static/ae5587abe0a5d30cacd060961a1d9f3c/c7227/register.png 1382w"\n            sizes="(max-width: 800px) 100vw, 800px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/ae5587abe0a5d30cacd060961a1d9f3c/7842b/register.png"\n            alt="api/user/register(POST) request"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n  </a>\n    </span>'}}),"\n",e.createElement(a.blockquote,null,"\n",e.createElement(a.p,null,"회원가입 시 설정한 비밀번호는 평문으로 request body에 담겨 전송되지만,"),"\n",e.createElement(a.p,null,e.createElement(a.strong,null,"HTTPS를 사용하면 전송 과정이 암호화"),"되기 때문에 중간에서 내용이 노출되지 않습니다."),"\n",e.createElement(a.p,null,"따라서 서버는 안전하게 비밀번호를 수신한 뒤 Bcrypt로 해싱하여 저장할 수 있습니다."),"\n"),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/11fa2f3c1725e382b9468a226c4e4ecb/e60c6/user9.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 113.5%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAABYlAAAWJQFJUiTwAAACIklEQVR42qVVy27TQBTN/yEWpbSwQPwAYo0q/gVVtMAGJFjBZ4SkJW2T0Ngjx05SN36N48fYp3dsp7FxHJp0pOPxeK7O3MeZ61YYxWhCEK6QrTfYLtGKY4E0TdcCqKPJNkmSFWF5ZDzFuNKAzgg4UwDNBHoMGE3qdvk6XU9YHuwGOFdz4rGZz2xWEKCJUOQhex6Hac5hTKaYzkyYt3MI0XwYmgiFkLFHuOz/xe9uj/AHnbMeOue9jNR2PDiuB9flsGyHDvZhWQ6tPQRBuJ4wimNoYx1M0zMSTTNwPWJQ2ZgOGmKkMAyvFVxcDaAwDReXA9pXcUO2jSFzf4EojO4303+zvk3IEb0o5A133PuESwiSQgVkm2SzyNbyPZGSKRyoVNkwDHS6XbTbbfT7fQyGQ3DOKx5v0qCcozIh5z44VZr7PvwCQoj/kuWE6Yowr3IMVSWR0Um7jlrIc8vCWNexWARZ/pa5eRDKHi4Jb0kCjDFqBOHjCGXIMelwbtlwZQ5lpbeUTE02Mvn6ZAZjOstuQLqNd00h+yTsIFg8SCYbq7zqNkmBdCdUrx7xuA7grAEVn7oQqYCurW3X9+W3XP8FIV0wagbA82fAwX4V+3vA61fA+yPg7Rvg5WHV7sUB8PQJcPQuJ5S/ilZKhPKU05M6Tj4CXz4DP74D374Cn06r+3J9/AH49bPkoXwkSVLK4W6QSpF9tRVQy+J+AI8/Dj7dMOnhHdAX7WC+HTwLAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/11fa2f3c1725e382b9468a226c4e4ecb/f1512/user9.webp 200w,\n/static/11fa2f3c1725e382b9468a226c4e4ecb/f59aa/user9.webp 400w,\n/static/11fa2f3c1725e382b9468a226c4e4ecb/47a22/user9.webp 800w,\n/static/11fa2f3c1725e382b9468a226c4e4ecb/a5df3/user9.webp 978w"\n              sizes="(max-width: 800px) 100vw, 800px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/11fa2f3c1725e382b9468a226c4e4ecb/f8f3a/user9.png 200w,\n/static/11fa2f3c1725e382b9468a226c4e4ecb/6a8a8/user9.png 400w,\n/static/11fa2f3c1725e382b9468a226c4e4ecb/7842b/user9.png 800w,\n/static/11fa2f3c1725e382b9468a226c4e4ecb/e60c6/user9.png 978w"\n            sizes="(max-width: 800px) 100vw, 800px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/11fa2f3c1725e382b9468a226c4e4ecb/7842b/user9.png"\n            alt="test9@test.com 사용자 가입"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n  </a>\n    </span>'}}),"\n",e.createElement(a.p,null,"회원가입 창에서 password를 1234로 설정하고, ",e.createElement(a.code,null,"api/user/register(POST)"),"를 호출하면, 아래와 같이 password가 암호화 되어 저장됩니다."),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 729px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/431d620bb4e817929f05e5fa1738157a/6a49a/user-password.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 18%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9klEQVR42j2P207CQAAF+/+/IwaVEBMoihYKbtuF3W1pS6HcogjIJUgcVx58mMycx+ME+YawPOFGJZ5eIoq97RmNfkZYfNFJ1rTknFZQIPItenlBLc5oy5/9bEtDFDx2Y/zRGudwgffdCT9UfNqxsfRsu22fvjRM5h903iSBSlHpFJ2VmHx2bZPattvrR4Qqo90VOPvjN+vtgSSfcDz/XDGjMZGKyadzdscz0TCmJyRCKsKhIZD63ypO0UlGWpQMbTueWdEMxjx4Brmwd1ZQe9XcNAR1PyWcnqg+SypuaD3g1o2oPg2oNAPu2op6N6HWia+3718Mv3crHWCj3NE1AAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/431d620bb4e817929f05e5fa1738157a/f1512/user-password.webp 200w,\n/static/431d620bb4e817929f05e5fa1738157a/f59aa/user-password.webp 400w,\n/static/431d620bb4e817929f05e5fa1738157a/4aa7e/user-password.webp 729w"\n              sizes="(max-width: 729px) 100vw, 729px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/431d620bb4e817929f05e5fa1738157a/f8f3a/user-password.png 200w,\n/static/431d620bb4e817929f05e5fa1738157a/6a8a8/user-password.png 400w,\n/static/431d620bb4e817929f05e5fa1738157a/6a49a/user-password.png 729w"\n            sizes="(max-width: 729px) 100vw, 729px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/431d620bb4e817929f05e5fa1738157a/6a49a/user-password.png"\n            alt="패스워드가 암호화 되어 저장됨"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n  </a>\n    </span>'}}),"\n",e.createElement(a.h3,null,"로그인 시 패스워드 비교"),"\n",e.createElement(a.p,null,"로그인 서비스에서 로그인 시 입력한 password와 DB에 저장된 암호화 된 password를 비교합니다."),"\n",e.createElement(a.p,null,"스프링 시큐리티의 crypto ",e.createElement(a.code,null,"PasswordEncoder"),"의 ",e.createElement(a.code,null,"matches"),"를 이용하면, 평문과 암호가 같은지 비교해볼 수 있습니다."),"\n",e.createElement(a.p,null,e.createElement(a.code,null,"encoder.matches(loginInfo.getPassword(), userInfo.getPassword())"),"와 같이 사용합니다."),"\n",e.createElement(a.p,null,"userInfo에는 암호화 된 비밀번호가, loginInfo는 request에 입력한 평문 비밀번호가 전달됩니다."),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java">  <span class="token keyword">public</span> <span class="token class-name">LoginResponseDto</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">LoginRequestDto</span> loginInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token class-name">UserDto</span> userInfo <span class="token operator">=</span> loginDao<span class="token punctuation">.</span><span class="token function">findUserByEmail</span><span class="token punctuation">(</span>loginInfo<span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>userInfo <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NotFoundException</span><span class="token punctuation">(</span><span class="token string">"가입되지 않은 사용자입니다."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>encoder<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span>loginInfo<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnauthorizedException</span><span class="token punctuation">(</span><span class="token string">"로그인 정보가 일치하지 않습니다."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>\n  <span class="token punctuation">}</span></code></pre></div>'}}),"\n",e.createElement(a.h2,null,"JWT 토큰 발행 및 인증 확인"),"\n",e.createElement(a.h3,null,e.createElement(a.code,null,"application.properties")," 설정"),"\n",e.createElement(a.p,null,"JWT의 서명(Signature)에 사용될 비밀키를 ",e.createElement(a.code,null,"jwt.secret"),"에 설정합니다."),"\n",e.createElement(a.p,null,"HMAC-SHA256 알고리즘을 사용할 경우 최소 256비트(32바이트) 이상의 키 길이가 필요합니다."),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">jwt.secret=[your-secret-key-here]</code></pre></div>'}}),"\n",e.createElement(a.p,null,"이 Key는 외부에 노출되면 보안에 문제가 생길 수 있으므로 별도로 관리해야합니다."),"\n",e.createElement(a.h3,null,"JWT 유틸리티 클래스 생성"),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Component</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JwtTokenProvider</span> <span class="token punctuation">{</span>\n\n  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Key</span> key<span class="token punctuation">;</span>\n\n  <span class="token keyword">public</span> <span class="token class-name">JwtTokenProvider</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"${jwt.secret}"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> secret<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> <span class="token class-name">Keys</span><span class="token punctuation">.</span><span class="token function">hmacShaKeyFor</span><span class="token punctuation">(</span>secret<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token comment">// 토큰 생성</span>\n  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> email<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token class-name">Date</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 발급 시간</span>\n    <span class="token class-name">Date</span> exp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 만료시간: 3시간</span>\n\n    <span class="token keyword">return</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n        <span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 토큰의 subject = 사용자 이메일</span>\n        <span class="token punctuation">.</span><span class="token function">claim</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span>\n        <span class="token punctuation">.</span><span class="token function">claim</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span> <span class="token comment">// 커스텀 claim</span>\n        <span class="token punctuation">.</span><span class="token function">setIssuedAt</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span> <span class="token comment">// 발급 시간</span>\n        <span class="token punctuation">.</span><span class="token function">setExpiration</span><span class="token punctuation">(</span>exp<span class="token punctuation">)</span> <span class="token comment">// 만료시간</span>\n        <span class="token punctuation">.</span><span class="token function">signWith</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token class-name">SignatureAlgorithm</span><span class="token punctuation">.</span><span class="token constant">HS256</span><span class="token punctuation">)</span> <span class="token comment">// 비밀키로 서명</span>\n        <span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 문자열 형태의 JWT 생성</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token comment">// 토큰 검증</span>\n  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">validate</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">try</span> <span class="token punctuation">{</span>\n      <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">parser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setSigningKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parseClaimsJws</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ExpiredJwtException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnauthorizedException</span><span class="token punctuation">(</span><span class="token string">"토큰이 만료되었습니다."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">JwtException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnauthorizedException</span><span class="token punctuation">(</span><span class="token string">"유효하지 않은 토큰입니다."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token comment">// 사용자 정보 반환</span>\n  <span class="token keyword">public</span> <span class="token class-name">Claims</span> <span class="token function">getClaims</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">parser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setSigningKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n        <span class="token punctuation">.</span><span class="token function">parseClaimsJws</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span>\n        <span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUserEmail</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token function">getClaims</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUserName</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token function">getClaims</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code></pre></div>'}}),"\n",e.createElement(a.p,null,e.createElement(a.strong,null,"JwtTokenProvider 생성자")),"\n",e.createElement(a.ul,null,"\n",e.createElement(a.li,null,e.createElement(a.code,null,"application.properties"),"에 저장된 ",e.createElement(a.code,null,"jwt.secret")," 값을 주입받아 HMAC-SHA256용 Key 객체를 생성합니다."),"\n",e.createElement(a.li,null,"이 Key는 토큰 생성 시 서명 과정에 사용되며, 토큰 검증 시 동일한 키를 사용하여 위변조 여부를 확인합니다."),"\n"),"\n",e.createElement(a.p,null,e.createElement(a.strong,null,"createToken")," 토큰 생성"),"\n",e.createElement(a.ul,null,"\n",e.createElement(a.li,null,"JWT를 생성하여 문자열 형태로 반환합니다."),"\n",e.createElement(a.li,null,"이메일을 ",e.createElement(a.code,null,"sub"),"(subject)로 설정하고, 사용자 id 및 이름과 같은 커스텀 Claim을 추가하여 이후 요청에서 사용자 식별이 가능하도록 구성합니다."),"\n",e.createElement(a.li,null,"발급 시간(",e.createElement(a.code,null,"iat"),")과 만료 시간(",e.createElement(a.code,null,"exp"),")을 명시하여 토큰의 유효 기간을 제한합니다."),"\n",e.createElement(a.li,null,"서버의 비밀키로 HS256 알고리즘을 사용해 서명하여 위조 방지가 가능한 토큰을 생성합니다."),"\n"),"\n",e.createElement(a.p,null,e.createElement(a.strong,null,"validate")," 토큰 검증"),"\n",e.createElement(a.ul,null,"\n",e.createElement(a.li,null,"클라이언트가 전송한 JWT가 올바르게 서명되었는지, 만료되지 않았는지 검증합니다."),"\n",e.createElement(a.li,null,"서명이 올바르지 않거나, 토큰 구조가 손상되었거나, 만료된 경우 예외를 발생시킵니다."),"\n"),"\n",e.createElement(a.h2,null,"로그인 시 브라우저 쿠키에 accessToken 저장"),"\n",e.createElement(a.p,null,"로그인 성공 후 서버는 생성된 JWT를 HttpOnly 쿠키에 담아 브라우저로 전달합니다."),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 531px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/a24fd6f9716e411d3de1401621023934/de23e/login.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 78.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACWUlEQVR42n1US47TQBT0VeAwHIhDwJYDIBbcgDOwQ2IBQkIsCArDJHYcO7Hd/4+LV+1xJJhJWnpy2939uupVPVedMtDWwjkH732JlBLatsU0TeCY57kExzAM2Gw22O/3GMcRWfbm6KGGTqJHFWJCTBkhBMQYS+ScywWcMxHf16TcNykFrTWUcfhxSPi6C/jyx+HX0aNy+gQz7EAARMYDXdeh7/vyPBwOqOu6IOacqBaswPfa4/nrE569OqF6ecSLtyMqazWsnkoi0rVCn1S1EQRKY5T5pJWgWr4ZYxY23qEdHd5/dnj3yeHNR4MP3wShMayfLxRD8AsVoWSihZFkp66BDfaSiBcW2rLGb/+PikUmNW687wMGky6L86IIrg0uMbop4WftoGxGRZrr7V5yxTxfOTw/GRwxzcKCwiZUVNi4ACdUw/mMIEhH7dD0Gt3ZYFRObOXlcC5qPxWzBPmQZUnoQoSXhNP9PVS9hxExdkeFfrTFUlGsxYQFVZ6voqXNqlLktG5eb1tGUd1Z2MhwRRwnJjby5Lly1od/GqKI4r2YmQkfapUfakPltTVQTuzipRRWrOOXdyfJ6AYmpTNWHSq20O/tFmepXyPGHcS4NHDT1MUa7aFFs69h5FCZi8lptak7wIsvOewqqqCsvExoYL4EerH0dICx0nppacUoe0hnpcZva6tSFK7xWWqY8iIKi+6k3dzxiMkEUdngPMkFMcOH5cAt+zBKDamiFUQFulDVd3dCQUzeamzrEXeNwv6oL567NXhpRQG8IGT2guDhz5IvN99slkcJ/wLErdoxul622AAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/a24fd6f9716e411d3de1401621023934/f1512/login.webp 200w,\n/static/a24fd6f9716e411d3de1401621023934/f59aa/login.webp 400w,\n/static/a24fd6f9716e411d3de1401621023934/cab8f/login.webp 531w"\n              sizes="(max-width: 531px) 100vw, 531px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/a24fd6f9716e411d3de1401621023934/f8f3a/login.png 200w,\n/static/a24fd6f9716e411d3de1401621023934/6a8a8/login.png 400w,\n/static/a24fd6f9716e411d3de1401621023934/de23e/login.png 531w"\n            sizes="(max-width: 531px) 100vw, 531px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/a24fd6f9716e411d3de1401621023934/de23e/login.png"\n            alt="로그인 postman"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n  </a>\n    </span>'}}),"\n",e.createElement(a.p,null,"아래는 쿠키에 accessToken을 담고있는 로그인 컨트롤러 코드입니다."),"\n",e.createElement(a.p,null,"로그인 service의 login에서 jwt 토큰을 create하여 반환해주고 있습니다."),"\n",e.createElement(a.p,null,"생성된 토큰을 브라우저 쿠키에 저장해두고, 다음 request 호출 시 자동으로 헤더에 토큰을 담아 전달해 줍니다."),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java">  <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span>\n  <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ResponseRegisterDto</span><span class="token punctuation">></span></span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">LoginRequestDto</span> loginRequest<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token class-name">LoginResponseDto</span> loginSuccess <span class="token operator">=</span> loginService<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>loginRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token class-name">ResponseCookie</span> cookie <span class="token operator">=</span> <span class="token class-name">ResponseCookie</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"accessToken"</span><span class="token punctuation">,</span> loginSuccess<span class="token punctuation">.</span><span class="token function">getAccessToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n        <span class="token punctuation">.</span><span class="token function">httpOnly</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>\n        <span class="token punctuation">.</span><span class="token function">secure</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">// http: false, https: true</span>\n        <span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span>\n        <span class="token punctuation">.</span><span class="token function">sameSite</span><span class="token punctuation">(</span><span class="token string">"Lax"</span><span class="token punctuation">)</span>\n        <span class="token punctuation">.</span><span class="token function">maxAge</span><span class="token punctuation">(</span><span class="token number">30</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">)</span> <span class="token comment">// 30분</span>\n        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n        <span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token class-name">HttpHeaders</span><span class="token punctuation">.</span><span class="token constant">SET_COOKIE</span><span class="token punctuation">,</span> cookie<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n        <span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span>loginSuccess<span class="token punctuation">.</span><span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span></code></pre></div>'}}),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 767px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/8253f22885da154f8107b04973825185/2059a/session.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 35%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAoklEQVR42q2RXQrCMBCEc/+beAYfvICnMPFBQ37apk0wgdEJrIhWUDHwhQnMzm5Y5ZyD1hohBAzDgGVZOvM8f0VKCdM0QcUYYYyBtRbU3vu7HsfxBTZdg/4eyHSGcEJCzanlTeNzEadZg1mqlNJNRKZ41DTmnEEfdWsN706tFYrXv04PZHdZxKewRpCFlNMB+XyEokG++QuBS7xRdhtc9ltcAcA0HJ3jIx+rAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/8253f22885da154f8107b04973825185/f1512/session.webp 200w,\n/static/8253f22885da154f8107b04973825185/f59aa/session.webp 400w,\n/static/8253f22885da154f8107b04973825185/04271/session.webp 767w"\n              sizes="(max-width: 767px) 100vw, 767px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/8253f22885da154f8107b04973825185/f8f3a/session.png 200w,\n/static/8253f22885da154f8107b04973825185/6a8a8/session.png 400w,\n/static/8253f22885da154f8107b04973825185/2059a/session.png 767w"\n            sizes="(max-width: 767px) 100vw, 767px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/8253f22885da154f8107b04973825185/2059a/session.png"\n            alt="session cookie"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n  </a>\n    </span>'}}),"\n",e.createElement(a.p,null,"지난번 세션ID를 쿠키에 저장했던 방식과 동일하게 동작합니다."),"\n",e.createElement(a.p,null,"포스트맨에서 login api 호출 후 다음과 같이 쿠키가 설정된 것을 확인할 수 있습니다."),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 732px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/3be17a98968ee9e709216f067f0eec82/8fb8e/cookie.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 21.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAfUlEQVR42o2PSQoFIQxEvf89bed55YBpKqD04i9+oKj4MBUVIQTy3lNKiWqtFGMksFIKtdaYwf8RZsQJQeDxIwSDWWvJGMOO5WBw5xz7eRQHAiql+PLzPDwopbwC01rfhVDO+S7F+fxirUWi907QGIN9znn7L/vW3pt+FfgLgmgyWOj0PjEAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/3be17a98968ee9e709216f067f0eec82/f1512/cookie.webp 200w,\n/static/3be17a98968ee9e709216f067f0eec82/f59aa/cookie.webp 400w,\n/static/3be17a98968ee9e709216f067f0eec82/36d60/cookie.webp 732w"\n              sizes="(max-width: 732px) 100vw, 732px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/3be17a98968ee9e709216f067f0eec82/f8f3a/cookie.png 200w,\n/static/3be17a98968ee9e709216f067f0eec82/6a8a8/cookie.png 400w,\n/static/3be17a98968ee9e709216f067f0eec82/8fb8e/cookie.png 732w"\n            sizes="(max-width: 732px) 100vw, 732px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/3be17a98968ee9e709216f067f0eec82/8fb8e/cookie.png"\n            alt="./cookie"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n  </a>\n    </span>'}}),"\n",e.createElement(a.h2,null,"기존 Interceptor를 Spring Security 설정으로 변경"),"\n",e.createElement(a.h3,null,"기존 Interceptor 제거"),"\n",e.createElement(a.p,null,"이제 Spring Security가 인증을 처리하므로 기존의 ",e.createElement(a.code,null,"LoginInterceptor"),"와 ",e.createElement(a.code,null,"WebConfig")," 설정은 제거합니다."),"\n",e.createElement(a.p,null,"일부 설정들은 Spring Security로 옮겨 사용하겠습니다."),"\n",e.createElement(a.h3,null,"JWT 인증 필터 작성"),"\n",e.createElement(a.p,null,"요청에서 JWT 토큰을 추출하고 검증하는 필터를 작성합니다."),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JwtAuthenticationFilter</span> <span class="token keyword">extends</span> <span class="token class-name">OncePerRequestFilter</span> <span class="token punctuation">{</span>\n\n  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">JwtTokenProvider</span> provider<span class="token punctuation">;</span>\n  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">LoginDao</span> loginDao<span class="token punctuation">;</span>\n\n  <span class="token keyword">public</span> <span class="token class-name">JwtAuthenticationFilter</span><span class="token punctuation">(</span><span class="token class-name">JwtTokenProvider</span> provider<span class="token punctuation">,</span> <span class="token class-name">LoginDao</span> loginDao<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>provider <span class="token operator">=</span> provider<span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>loginDao <span class="token operator">=</span> loginDao<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token annotation punctuation">@Override</span>\n  <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doFilterInternal</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span>\n      <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span>\n      <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span>\n      <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>\n\n    <span class="token class-name">String</span> token <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n\n    <span class="token class-name">Cookie</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cookies <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>cookies <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Cookie</span> cookie <span class="token operator">:</span> cookies<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"accessToken"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          token <span class="token operator">=</span> cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>token <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      provider<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n      <span class="token class-name">String</span> email <span class="token operator">=</span> provider<span class="token punctuation">.</span><span class="token function">getUserEmail</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token class-name">UserDto</span> user <span class="token operator">=</span> loginDao<span class="token punctuation">.</span><span class="token function">findUserByEmail</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      user<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n      <span class="token class-name">UsernamePasswordAuthenticationToken</span> auth <span class="token operator">=</span>\n          <span class="token keyword">new</span> <span class="token class-name">UsernamePasswordAuthenticationToken</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token class-name">SecurityContextHolder</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAuthentication</span><span class="token punctuation">(</span>auth<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code></pre></div>'}}),"\n",e.createElement(a.p,null,e.createElement(a.strong,null,"OncePerRequestFilter")),"\n",e.createElement(a.ul,null,"\n",e.createElement(a.li,null,"Spring Security가 제공하는 필터 기반 추상 클래스"),"\n",e.createElement(a.li,null,"한 HTTP 요청에 대해 단 한번만 실행되는 보안 필터를 만들 때 사용"),"\n",e.createElement(a.li,null,e.createElement(a.code,null,"doFilterInternal()")," 메서드에 보안 필터 로직 작성"),"\n"),"\n",e.createElement(a.p,null,e.createElement(a.strong,null,e.createElement(a.code,null,"doFilterInternal()")," 내부 동작 설명")),"\n",e.createElement(a.ol,null,"\n",e.createElement(a.li,null,"\n",e.createElement(a.p,null,"쿠키에서 JWT 토큰(accessToken) 추출"),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"> <span class="token class-name">String</span> token <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n\n <span class="token class-name">Cookie</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cookies <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n <span class="token keyword">if</span> <span class="token punctuation">(</span>cookies <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Cookie</span> cookie <span class="token operator">:</span> cookies<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     <span class="token keyword">if</span> <span class="token punctuation">(</span>cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"accessToken"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n       token <span class="token operator">=</span> cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n     <span class="token punctuation">}</span>\n   <span class="token punctuation">}</span>\n <span class="token punctuation">}</span></code></pre></div>'}}),"\n"),"\n",e.createElement(a.li,null,"\n",e.createElement(a.p,null,"JWT 유효성 검증"),"\n",e.createElement(a.ul,null,"\n",e.createElement(a.li,null,e.createElement(a.code,null,"provider.validate(token);")),"\n"),"\n"),"\n",e.createElement(a.li,null,"\n",e.createElement(a.p,null,"JWT에서 사용자 email 추출"),"\n",e.createElement(a.ul,null,"\n",e.createElement(a.li,null,e.createElement(a.code,null,"String email = provider.getUserEmail(token);")),"\n"),"\n"),"\n",e.createElement(a.li,null,"\n",e.createElement(a.p,null,"DB에서 사용자 조회 후 user 객체 생성"),"\n",e.createElement(a.ul,null,"\n",e.createElement(a.li,null,e.createElement(a.code,null,"UserDto user = loginDao.findUserByEmail(email);")),"\n"),"\n"),"\n",e.createElement(a.li,null,"\n",e.createElement(a.p,null,"스프링 시큐리티 인증 객체 ",e.createElement(a.code,null,"Authentication")," 생성"),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"> <span class="token class-name">UsernamePasswordAuthenticationToken</span> auth <span class="token operator">=</span>\n <span class="token keyword">new</span> <span class="token class-name">UsernamePasswordAuthenticationToken</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>'}}),"\n"),"\n",e.createElement(a.li,null,"\n",e.createElement(a.p,null,e.createElement(a.code,null,"SecurityContextHolder"),"에 인증 정보 저장"),"\n",e.createElement(a.ul,null,"\n",e.createElement(a.li,null,e.createElement(a.code,null,"SecurityContextHolder.getContext().setAuthentication(auth);")),"\n"),"\n"),"\n",e.createElement(a.li,null,"\n",e.createElement(a.p,null,"다음 필터로 요청 전달"),"\n",e.createElement(a.ul,null,"\n",e.createElement(a.li,null,e.createElement(a.code,null,"chain.doFilter(request, response);")),"\n"),"\n"),"\n"),"\n",e.createElement(a.h3,null,"인증 실패 시 처리 정의"),"\n",e.createElement(a.p,null,"기존 ",e.createElement(a.code,null,"LoginInterceptor"),"에서 세션이 비어있을 때에 대해 정의되어 있던 로직을 작성했습니다."),"\n",e.createElement(a.p,null,e.createElement(a.code,null,"AuthenticationEntryPoint"),"는 인증 실패 또는 인증 정보가 없는 경우에 스프링 시큐리티가 호출하는 핸들러입니다."),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Component</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomAuthenticationEntryPoint</span> <span class="token keyword">implements</span> <span class="token class-name">AuthenticationEntryPoint</span> <span class="token punctuation">{</span>\n\n  <span class="token annotation punctuation">@Override</span>\n  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">commence</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span>\n      <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span>\n      <span class="token class-name">AuthenticationException</span> authException<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>\n\n    response<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">.</span><span class="token constant">SC_UNAUTHORIZED</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"application/json; charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>\n        <span class="token string">"{\\"status\\":401, \\"message\\":\\"로그인이 필요합니다.\\"}"</span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code></pre></div>'}}),"\n",e.createElement(a.p,null,"로그인하지 않고 다른 조회 api를 호출하면 다음과 같이 에러 코드와 메세지를 반환합니다."),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 679px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/82c2d1dd43ec47a50a2f645b791057d8/ae072/401.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 49.5%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABd0lEQVR42nWSTU7DQAyFczXuwJqzcAc2rFlxBtbcoEsWsKpE2qTNTOZ/Jg8/t0WhKpZGHjnxZ/t5OuNnxJzQakNKCcYYmMngeDxiHEdM06Sxw+EAay1KKai1IpcKoOKjT7h/Mbh7nvDwatFZAfoU9KcYoyY57zDPM4zc6b33p7hzyDmjtSZgAS4N36bg6d3j8c2p78w4SDeDQLx26IP4khDlHsWXXLQrgliQ/yzLAhr9+l5LQzcOA74+PzXh2nS0VfySzAL+3ABDIWZtgE11fd9js9nomCmnP1XZEROvjUCOT+C6MOMdtZlkCSEEDaxNx6C2KSIUgcsJOaoUqaZTXPIII1yBu91OBD8Jz4/cKKvrUozV2H7YwzoLI1oTlqsA5LAYIYRdFtZxk3vRkYEoybObFZJiQDjrxCnosyzsIsetSRRY5Qk40aoIMGy3Ap5xdBEuFBiXcSP/X9ORSVcNpZtKMPXIVTfnI8dq+u70SBe/96tDDrf8A6YqCQg9i3K7AAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/82c2d1dd43ec47a50a2f645b791057d8/f1512/401.webp 200w,\n/static/82c2d1dd43ec47a50a2f645b791057d8/f59aa/401.webp 400w,\n/static/82c2d1dd43ec47a50a2f645b791057d8/35e2d/401.webp 679w"\n              sizes="(max-width: 679px) 100vw, 679px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/82c2d1dd43ec47a50a2f645b791057d8/f8f3a/401.png 200w,\n/static/82c2d1dd43ec47a50a2f645b791057d8/6a8a8/401.png 400w,\n/static/82c2d1dd43ec47a50a2f645b791057d8/ae072/401.png 679w"\n            sizes="(max-width: 679px) 100vw, 679px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/82c2d1dd43ec47a50a2f645b791057d8/ae072/401.png"\n            alt="401Unauthorized"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n  </a>\n    </span>'}}),"\n",e.createElement(a.h3,null,e.createElement(a.code,null,"SecurityConfig")," 설정"),"\n",e.createElement(a.p,null,e.createElement(a.code,null,"SecurityConfig"),"는\n스프링 시큐리티의 설정을 정의하는 클래스입니다."),"\n",e.createElement(a.p,null,"위에서 작성한 패스워드 암호화를 위한 PasswordEncoder / HTTP 각 요청에 대한 JWT 검증 필터 / 인증 실패 시 동작할 핸들러를 등록해줍니다."),"\n",e.createElement(a.p,null,"아래와 같은 설정을 하고있습니다."),"\n",e.createElement(a.ul,null,"\n",e.createElement(a.li,null,"PasswordEncoder Bean 등록"),"\n",e.createElement(a.li,null,"SecurityFilterChain 설정"),"\n",e.createElement(a.li,null,"CustomAuthenticationEntryPoint 설정"),"\n",e.createElement(a.li,null,"기존 WebConfig에서 인터셉터 예외 경로 설정을 하는 부분"),"\n"),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityConfig</span> <span class="token punctuation">{</span>\n\n  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">JwtTokenProvider</span> tokenProvider<span class="token punctuation">;</span>\n  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">LoginDao</span> loginDao<span class="token punctuation">;</span>\n  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">CustomAuthenticationEntryPoint</span> entryPoint<span class="token punctuation">;</span>\n\n  <span class="token keyword">public</span> <span class="token class-name">SecurityConfig</span><span class="token punctuation">(</span><span class="token class-name">JwtTokenProvider</span> tokenProvider<span class="token punctuation">,</span> <span class="token class-name">LoginDao</span> loginDao<span class="token punctuation">,</span>\n      <span class="token class-name">CustomAuthenticationEntryPoint</span> entryPoint<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>tokenProvider <span class="token operator">=</span> tokenProvider<span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>loginDao <span class="token operator">=</span> loginDao<span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>entryPoint <span class="token operator">=</span> entryPoint<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token annotation punctuation">@Bean</span>\n  <span class="token keyword">public</span> <span class="token class-name">PasswordEncoder</span> <span class="token function">passwordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BCryptPasswordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token annotation punctuation">@Bean</span>\n  <span class="token keyword">public</span> <span class="token class-name">SecurityFilterChain</span> <span class="token function">filterChain</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>\n\n    <span class="token class-name">JwtAuthenticationFilter</span> jwtFilter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JwtAuthenticationFilter</span><span class="token punctuation">(</span>tokenProvider<span class="token punctuation">,</span> loginDao<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    http\n        <span class="token punctuation">.</span><span class="token function">csrf</span><span class="token punctuation">(</span><span class="token class-name">AbstractHttpConfigurer</span><span class="token operator">::</span><span class="token function">disable</span><span class="token punctuation">)</span>\n        <span class="token punctuation">.</span><span class="token function">exceptionHandling</span><span class="token punctuation">(</span>e <span class="token operator">-></span> e<span class="token punctuation">.</span><span class="token function">authenticationEntryPoint</span><span class="token punctuation">(</span>entryPoint<span class="token punctuation">)</span><span class="token punctuation">)</span>\n        <span class="token punctuation">.</span><span class="token function">sessionManagement</span><span class="token punctuation">(</span>s <span class="token operator">-></span> s<span class="token punctuation">.</span><span class="token function">sessionCreationPolicy</span><span class="token punctuation">(</span><span class="token class-name">SessionCreationPolicy</span><span class="token punctuation">.</span><span class="token constant">STATELESS</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n        <span class="token punctuation">.</span><span class="token function">authorizeHttpRequests</span><span class="token punctuation">(</span>auth <span class="token operator">-></span> auth\n            <span class="token punctuation">.</span><span class="token function">requestMatchers</span><span class="token punctuation">(</span><span class="token string">"/api/auth/login"</span><span class="token punctuation">,</span> <span class="token string">"/api/user/register"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n            <span class="token punctuation">.</span><span class="token function">anyRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">authenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n        <span class="token punctuation">)</span>\n        <span class="token punctuation">.</span><span class="token function">addFilterBefore</span><span class="token punctuation">(</span>jwtFilter<span class="token punctuation">,</span> <span class="token class-name">UsernamePasswordAuthenticationFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">return</span> http<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code></pre></div>'}}),"\n",e.createElement(a.h1,null,"마무리"),"\n",e.createElement(a.h2,null,"인증 흐름 요약"),"\n",e.createElement(a.p,null,"이번에 구현한 JWT 기반 인증의 전체 흐름은 다음과 같습니다."),"\n",e.createElement(a.ol,null,"\n",e.createElement(a.li,null,e.createElement(a.strong,null,"로그인 요청:")," 사용자가 ",e.createElement(a.code,null,"email"),"과 ",e.createElement(a.code,null,"password"),"를 서버로 전송합니다."),"\n",e.createElement(a.li,null,e.createElement(a.strong,null,"비밀번호 검증:")," 서버는 저장된 Bcrypt 해시값과 입력된 평문 비밀번호를 ",e.createElement(a.code,null,"BCryptPasswordEncoder.matches()"),"로 비교합니다."),"\n",e.createElement(a.li,null,e.createElement(a.strong,null,"JWT 발급:")," 검증이 완료되면 사용자 정보(email)를 담은 JWT 토큰을 생성합니다."),"\n",e.createElement(a.li,null,e.createElement(a.strong,null,"쿠키 전달:")," 발급된 JWT를 ",e.createElement(a.code,null,"HttpOnly")," 속성이 적용된 쿠키에 담아 클라이언트로 전송합니다."),"\n",e.createElement(a.li,null,e.createElement(a.strong,null,"자동 인증:")," 클라이언트는 이후 모든 API 요청 시 이 쿠키를 자동으로 포함하여 전송합니다."),"\n",e.createElement(a.li,null,e.createElement(a.strong,null,"토큰 검증 및 인증:")," ",e.createElement(a.code,null,"JwtAuthenticationFilter"),"가 쿠키에서 토큰을 추출하고 유효성을 검증한 뒤, ",e.createElement(a.code,null,"SecurityContext"),"에 인증 정보를 등록하여 컨트롤러가 실행됩니다."),"\n"),"\n",e.createElement(a.h2,null,"주요 개선 사항"),"\n",e.createElement(a.p,null,"세션 기반 인증에서 JWT와 Spring Security를 도입하면서 다음과 같은 개선이 이루어졌습니다."),"\n",e.createElement(a.h3,null,"1. ",e.createElement(a.strong,null,"보안 강화")),"\n",e.createElement(a.ul,null,"\n",e.createElement(a.li,null,e.createElement(a.strong,null,"비밀번호 암호화:")," 평문 저장 방식에서 Bcrypt 해시 방식으로 전환하여 DB 유출 시에도 원본 비밀번호를 보호합니다."),"\n",e.createElement(a.li,null,e.createElement(a.strong,null,"HttpOnly 쿠키:")," JWT를 HttpOnly 쿠키에 담아 JavaScript를 통한 토큰 탈취(XSS 공격)를 방지합니다."),"\n",e.createElement(a.li,null,e.createElement(a.strong,null,"HTTPS 전제:")," 평문 비밀번호 전송은 HTTPS를 통한 전송 구간 암호화를 전제로 안전하게 동작합니다."),"\n"),"\n",e.createElement(a.h3,null,"2. ",e.createElement(a.strong,null,"확장성 및 유지보수성")),"\n",e.createElement(a.ul,null,"\n",e.createElement(a.li,null,e.createElement(a.strong,null,"Stateless 인증:")," 서버가 세션 상태를 저장하지 않아 수평 확장(Scale-out)이 용이하고, MSA 환경에 적합합니다."),"\n",e.createElement(a.li,null,e.createElement(a.strong,null,"체계적인 인증 관리:")," Spring Security의 Filter Chain을 활용하여 인증 로직이 비즈니스 로직과 분리되었습니다."),"\n",e.createElement(a.li,null,e.createElement(a.strong,null,"선언적 보안 설정:")," ",e.createElement(a.code,null,"SecurityConfig"),"에서 API별 접근 제어를 중앙에서 관리할 수 있습니다."),"\n"),"\n",e.createElement(a.h3,null,"3. ",e.createElement(a.strong,null,"개발 편의성")),"\n",e.createElement(a.ul,null,"\n",e.createElement(a.li,null,e.createElement(a.strong,null,"인터셉터 제거:")," 기존 ",e.createElement(a.code,null,"HandlerInterceptor")," 방식보다 더 이른 단계에서 인증을 처리하며, Spring Security의 표준 기능을 활용합니다."),"\n",e.createElement(a.li,null,e.createElement(a.strong,null,"일관된 예외 처리:")," ",e.createElement(a.code,null,"CustomAuthenticationEntryPoint"),"를 통해 인증 실패 시 일관된 JSON 응답을 제공합니다."),"\n"),"\n",e.createElement(a.h2,null,"배운 점"),"\n",e.createElement(a.p,null,"이번 구현을 통해 다음을 깊이 이해할 수 있었습니다."),"\n",e.createElement(a.ol,null,"\n",e.createElement(a.li,null,e.createElement(a.strong,null,"인증 vs 인가:"),' 인증(Authentication)은 "누구인지" 확인하는 것이고, 인가(Authorization)는 "무엇을 할 수 있는지" 결정하는 것입니다.'),"\n",e.createElement(a.li,null,e.createElement(a.strong,null,"JWT의 장단점:")," Stateless의 장점이 있지만, 토큰 만료 전 무효화가 어렵다는 한계도 함께 이해했습니다."),"\n",e.createElement(a.li,null,e.createElement(a.strong,null,"Spring Security의 필터 체인:")," 요청 처리 과정에서 Security Filter가 어떻게 동작하는지, 그리고 커스터마이징 방법을 배웠습니다."),"\n",e.createElement(a.li,null,e.createElement(a.strong,null,"보안의 계층적 접근:")," 암호화, HTTPS, HttpOnly 쿠키 등 여러 보안 기법을 조합하여 시스템을 보호하는 방법을 알게 되었습니다."),"\n"),"\n",e.createElement(a.hr),"\n",e.createElement(a.h3,null,"멀티캠퍼스 TIL 챌린지 11월 우수 포스트로 선정되었습니다."),"\n",e.createElement(a.p,null,e.createElement(a.a,{href:"https://blog.naver.com/multicampus_it/224094467968"},"[TIL 챌린지] 우수 참여자 발표-11월🍀")),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/3152f3adc6040b777c203ed747943565/ca6ca/multicampus.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 39.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA7klEQVR42o1R2W7EIBDj/38yuzlJYCFAyPXiYrpEUVW1+2B5xhbWDCOklBjHEcaYjGmaMmutLzjnsO87tm37F8L7gBgjlmXJCCFcdQH9T8JyoNUKQ98jpIfneeI4jl/BCT+BsLc1rbUZXHGe56u/e6zp33X2rL33KTAJwzDkUIL/SZZyRJ8mp1d8etTI/HvqZKLruhwqlFKoqgp1XaNpmsyPxxP1s0LXNvkRQwiG8iFrhrRte/nUuZXgEcro83utl0lr2AlxSQdbV6w/UA5Q6jsL4wKUDZjMN+v53dslaR7jy0ElHrSDTHWM659X/gKURmGTuZr6cwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/3152f3adc6040b777c203ed747943565/f1512/multicampus.webp 200w,\n/static/3152f3adc6040b777c203ed747943565/f59aa/multicampus.webp 400w,\n/static/3152f3adc6040b777c203ed747943565/47a22/multicampus.webp 800w,\n/static/3152f3adc6040b777c203ed747943565/5bb53/multicampus.webp 1200w,\n/static/3152f3adc6040b777c203ed747943565/485a2/multicampus.webp 1600w,\n/static/3152f3adc6040b777c203ed747943565/68a52/multicampus.webp 1858w"\n              sizes="(max-width: 800px) 100vw, 800px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/3152f3adc6040b777c203ed747943565/f8f3a/multicampus.png 200w,\n/static/3152f3adc6040b777c203ed747943565/6a8a8/multicampus.png 400w,\n/static/3152f3adc6040b777c203ed747943565/7842b/multicampus.png 800w,\n/static/3152f3adc6040b777c203ed747943565/5ece7/multicampus.png 1200w,\n/static/3152f3adc6040b777c203ed747943565/0d4f8/multicampus.png 1600w,\n/static/3152f3adc6040b777c203ed747943565/ca6ca/multicampus.png 1858w"\n            sizes="(max-width: 800px) 100vw, 800px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/3152f3adc6040b777c203ed747943565/7842b/multicampus.png"\n            alt="우수 참여자 발표-11월"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n  </a>\n    </span>'}}))}var c=function(n){void 0===n&&(n={});const{wrapper:a}=Object.assign({},(0,t.RP)(),n.components);return a?e.createElement(a,n,e.createElement(p,n)):p(n)},o=s(7082),l=s(8009),u=s(5606),i=s(8454),r=s(1042),k=s(6952);function m(n){let{data:a,children:s}=n;return e.createElement(o.A,null,e.createElement(u.A,{data:a}),e.createElement("section",{className:"post-body-container"},e.createElement(k.A,null),e.createElement("div",{className:"post-body"},s),e.createElement("div",{className:"post-tags-area"},e.createElement(i.A,{tags:a.mdx.frontmatter.tags,isLinked:!0})),e.createElement("div",{className:"post-top-wrap"},e.createElement("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"post-top-button","aria-label":"맨 위로 이동"},"↑ TOP"))),e.createElement("section",{className:"comment-section"},e.createElement(l.A,null)))}function g(n){let{data:a}=n;return e.createElement(r.A,{title:a.mdx.frontmatter.title})}function d(n){return e.createElement(m,n,e.createElement(c,n))}},5606:function(n,a,s){var t=s(6540),e=s(7962);a.A=function(n){let{data:a}=n;return t.createElement("div",{className:"post-content-container"},t.createElement("h1",{className:"post-content-title"},a.mdx.frontmatter.title),t.createElement("p",{className:"post-content-meta"},"작성일: ",a.mdx.frontmatter.date),t.createElement("div",{className:"breadcrumb-wrap"},t.createElement(e.A,{info:[{name:"HOME",url:"/"},{name:`${a.mdx.frontmatter.category}`,url:`/categories/${a.mdx.frontmatter.category}`},{name:a.mdx.frontmatter.title,url:`/${a.mdx.frontmatter.slug}`}]})))}},6952:function(n,a,s){var t=s(6540);a.A=()=>{const{0:n,1:a}=(0,t.useState)(!1),{0:s,1:e}=(0,t.useState)([]);(0,t.useEffect)((()=>{const n=document.querySelectorAll("h1, h2, h3, h4, h5, h6"),a=Array.from(n).map(((n,a)=>(n.id||(n.id=`heading-${a}`),{id:n.id,text:n.textContent||"",level:parseInt(n.tagName.charAt(1),10),element:n})));e(a)}),[]);return 0===s.length?null:t.createElement("div",{className:"toc-container"},t.createElement("button",{className:"toc-toggle",onClick:()=>a(!n),"aria-expanded":n,"aria-controls":"toc-content"},t.createElement("span",{className:"toc-title"},"목차"),t.createElement("span",{className:"toc-arrow "+(n?"open":"")},"▼")),t.createElement("div",{id:"toc-content",className:"toc-content "+(n?"open":"")},t.createElement("nav",{className:"toc-nav"},t.createElement("ul",{className:"toc-list"},s.map((n=>t.createElement("li",{key:n.id,className:`toc-item level-${n.level} `},t.createElement("button",{className:"toc-link",onClick:()=>(n=>{const a=document.getElementById(n);if(a){const n=80,s=a.offsetTop-n;window.scrollTo({top:s,behavior:"smooth"})}})(n.id),title:n.text},n.text))))))))}},7717:function(n,a){a.A={gatsby:"Gatsby",react:"React",utterances:"Utterances",github:"Github",blog:"블로그",seo:"SEO","tailwind-css":"Tailwind CSS",bootcamp:"부트캠프후기","multi-campus":"멀티캠퍼스IT부트캠프","ureca-backend":"LG U+ 유레카 3기 백엔드",java:"JAVA",study:"스터디",database:"데이터베이스",sql:"SQL",conccurency:"동시성",redis:"Redis"}},7962:function(n,a,s){s.d(a,{A:function(){return o}});var t=s(6540),e=s(6188),p=s(2337),c=s(4794);function o(n){let{info:a}=n;return a&&0!==a.length?t.createElement("nav",{"aria-label":"breadcrumb",className:"breadcrumb"},t.createElement("ol",{className:"breadcrumb-list"},a.map(((n,s)=>{const o=s===a.length-1;return t.createElement("li",{key:n.url||`${n.name}-${s}`,className:"breadcrumb-item"},o?t.createElement("span",{"aria-current":"page",className:"breadcrumb-current"},n.name):t.createElement(c.Link,{to:n.url,className:"breadcrumb-link"},n.name),!o&&t.createElement("span",{className:"breadcrumb-sep"},t.createElement(p.g,{icon:e.vmR,className:"breadcrumb-sep-icon"})))})))):null}},8009:function(n,a,s){var t=s(6540);a.A=function(){const n=(0,t.useRef)(null),{0:a,1:s}=(0,t.useState)("pending");return(0,t.useEffect)((()=>{const a=n.current;if(!a)return;a.innerHTML="";const t=document.createElement("script");return t.src="https://utteranc.es/client.js",t.async=!0,t.crossOrigin="anonymous",t.setAttribute("repo","aaxx98/aaxx98.github.io"),t.setAttribute("issue-term","pathname"),t.setAttribute("theme","github-dark"),t.onload=()=>s("success"),t.onerror=()=>s("failed"),a.appendChild(t),()=>{a.innerHTML=""}}),[]),t.createElement("section",{className:"comment-container","aria-label":"댓글"},"failed"===a&&t.createElement("div",{className:"comment-status error"},"댓글을 불러오는 중 오류가 발생했습니다. 새로고침 후 다시 시도해주세요."),"pending"===a&&t.createElement("div",{className:"comment-status pending"},"댓글을 불러오는 중..."),t.createElement("div",{ref:n,className:"utterances-container"}))}},8454:function(n,a,s){var t=s(6540),e=s(4794),p=s(7717);a.A=function(n){let{tags:a,isLinked:s=!1}=n;return t.createElement("div",{className:"post-tags"},a.map((n=>s?t.createElement(e.Link,{key:n,to:`/tags/${n}`,className:"post-tag"},"#",p.A[n]||n):t.createElement("div",{key:n,className:"post-tag"},"#",p.A[n]||n))))}}}]);
//# sourceMappingURL=component---src-pages-post-mdx-frontmatter-slug-tsx-content-file-path-content-til-20251124-til-20251124-mdx-329f6e6875e979ed3089.js.map